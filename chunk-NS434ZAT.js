import{a as m}from"./chunk-ZYCYIVJV.js";import{c as u,e as p}from"./chunk-V4HT3JDP.js";import{a as c}from"./chunk-M6G75PQQ.js";import{Ab as n,Oa as i,Ua as o,kb as a,lb as s}from"./chunk-GPF5BPB6.js";var h=class r{constructor(e,t,v,l){this.route=e;this.router=t;this.authService=v;this.http=l}ngOnInit(){let e=this.route.snapshot.queryParamMap.get("token");e?(localStorage.setItem("token",e),this.http.get("http://localhost:5000/api/auth/me",{headers:{Authorization:`Bearer ${e}`}}).subscribe({next:t=>{this.authService.setUser(t.user),this.authService.setAuthState(!0),this.router.navigate(["/"])},error:t=>{console.error("Gre\u0161ka kod /me:",t),this.authService.logout(),this.router.navigate(["/login"])}})):this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||r)(i(u),i(p),i(m),i(c))};static \u0275cmp=o({type:r,selectors:[["app-oauth-success"]],decls:2,vars:0,template:function(t,v){t&1&&(a(0,"p"),n(1,"Prijava uspje\u0161na! Preusmjeravam..."),s())},encapsulation:2})};export{h as OauthSuccessComponent};
