import{a as A,b as N}from"./chunk-O3ILVNDL.js";import{a as S,b as c,c as k,d as P,f as R,h as M,i as x,m as F,n as I,p as y}from"./chunk-DTJY53OX.js";import{a as T}from"./chunk-HP2GQHZV.js";import{c as h,e as E}from"./chunk-V4HT3JDP.js";import{Ab as n,Bb as g,Ja as s,Oa as d,Ua as b,Za as f,eb as l,gc as C,kb as i,lb as t,mb as u,mc as _,pa as w,rb as p,sb as v}from"./chunk-GPF5BPB6.js";function D(e){return typeof e=="object"&&e!==null&&"error"in e?e.error?.message??"Do\u0161lo je do gre\u0161ke.":"Do\u0161lo je do gre\u0161ke."}function G(e,a){e&1&&(i(0,"div")(1,"label",14),n(2,"Email:"),t(),u(3,"input",15),t())}function O(e,a){if(e&1&&(i(0,"div",16),n(1),t()),e&2){let r=v();s(),g(r.successMessage)}}function V(e,a){if(e&1&&(i(0,"div",17),n(1),t()),e&2){let r=v();s(),g(r.errorMessage)}}var q=class e{constructor(a,r,o,m){this.route=a;this.fb=r;this.authService=o;this.router=m}closed=new w;resetForm;token;email;errorMessage="";successMessage="";ngOnInit(){this.token=this.route.snapshot.queryParamMap.get("token")||"",this.email=this.route.snapshot.queryParamMap.get("email")||"",this.resetForm=this.fb.group({email:[this.email||"",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required]})}onSubmit(){if(this.resetForm.invalid)return;let{email:a,password:r,confirmPassword:o}=this.resetForm.value;if(r!==o){this.errorMessage="The passwords do not match";return}this.authService.resetPassword(this.token,a,r).subscribe({next:m=>{this.successMessage=m.message,this.errorMessage="",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:m=>{this.errorMessage=D(m)}})}close(){this.closed.emit()}static \u0275fac=function(r){return new(r||e)(d(h),d(I),d(T),d(E))};static \u0275cmp=b({type:e,selectors:[["app-reset-password"]],outputs:{closed:"closed"},decls:23,vars:6,consts:[["appAccessibleClick","",1,"modal-backdrop",3,"accessibleClick"],["appTrapFocus","",1,"modal-content",3,"click","onEscape"],["appAccessibleClick","",1,"close-button",3,"accessibleClick"],[3,"ngSubmit","formGroup"],[1,"text-center"],[1,"form-row"],[4,"ngIf"],["for","password"],["type","password","formControlName","password","id","password","required",""],["for","confirmPassword"],["type","password","formControlName","confirmPassword","id","confirmPassword","required",""],["type","submit",1,"link",3,"disabled"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["for","email"],["type","email","formControlName","email","id","email","required",""],[1,"success-message"],[1,"error-message"]],template:function(r,o){r&1&&(i(0,"div",0),p("accessibleClick",function(){return o.close()}),i(1,"div",1),p("click",function(j){return j.stopPropagation()}),i(2,"button",2),p("accessibleClick",function(){return o.close()}),n(3,"\xD7"),t(),i(4,"form",3),p("ngSubmit",function(){return o.onSubmit()}),i(5,"h4",4),n(6,"Reset Password"),t(),i(7,"div",5),f(8,G,4,0,"div",6),t(),i(9,"div",5)(10,"div")(11,"label",7),n(12,"New Password:"),t(),u(13,"input",8),t()(),i(14,"div",5)(15,"div")(16,"label",9),n(17,"Confirm Password:"),t(),u(18,"input",10),t()(),i(19,"button",11),n(20,"Resetiraj lozinku"),t()(),f(21,O,2,1,"div",12)(22,V,2,1,"div",13),t()()),r&2&&(s(),l("onEscape",o.close),s(3),l("formGroup",o.resetForm),s(4),l("ngIf",!o.email),s(11),l("disabled",o.resetForm.invalid),s(2),l("ngIf",o.successMessage),s(),l("ngIf",o.errorMessage))},dependencies:[y,R,S,k,P,F,M,x,_,C,N,A],encapsulation:2})};export{q as a};
