import{a as cn}from"./chunk-FNVG6LUR.js";import{A as Jt,B as ne,C as _e,D as Qt,G as Zt,a as Z,b as ee,c as He,d as se,e as Oe,f as N,g as te,h as A,i as Be,j as Ge,k as ye,l as de,m as ze,n as Ye,o as $,p as ut,q as Xe,r as Ae,s as Kt,t as pt,u as ht,v as ft,w as gt,x as Se,y as Re,z as qt}from"./chunk-RLL3ZOTZ.js";import{b as rn,d as dn}from"./chunk-VIPQAVYR.js";import"./chunk-ATBZJWYU.js";import"./chunk-SUZLID75.js";import"./chunk-54DFDRU5.js";import"./chunk-Z2VXY6A4.js";import{a as on,b as ln}from"./chunk-O3ILVNDL.js";import{a as an}from"./chunk-ZCX7W3PH.js";import{a as Ue,c as Ke,e as qe,g as Je,j as en,k as tn,l as nn,o as be}from"./chunk-DTJY53OX.js";import"./chunk-HP2GQHZV.js";import{a as sn}from"./chunk-DJ4ZLQE5.js";import"./chunk-V4HT3JDP.js";import{a as Ut}from"./chunk-M6G75PQQ.js";import{Ab as d,Bb as f,Cb as y,Db as $e,Eb as H,Fb as B,Gb as G,Ia as Vt,Ib as Ht,Ja as c,Jb as ge,Kb as mt,Lb as R,Nb as L,Oa as le,Ob as J,Rb as Bt,Ua as Y,Y as At,Za as _,a as ke,b as ct,ba as Rt,db as Ne,eb as g,fb as X,fc as ve,gb as Wt,gc as xe,ha as Lt,hc as Gt,ia as M,ib as U,ic as zt,ja as T,jc as Yt,kb as o,kc as je,lb as l,lc as Xt,mb as w,mc as Q,nb as K,ob as q,pa as W,pb as Pe,qb as E,rb as D,sb as v,vb as Fe,wb as Nt,xb as $t,yb as jt,zb as j}from"./chunk-GPF5BPB6.js";var Qe=class n{tournamentEventTPId;closed=new W;close(){this.closed.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Y({type:n,selectors:[["app-tournament-modal"]],inputs:{tournamentEventTPId:"tournamentEventTPId"},outputs:{closed:"closed"},decls:9,vars:0,consts:[[1,"modal-backdrop","show"],[1,"modal","show"],[1,"modal-header","justify-content-between","align-items-center"],[1,"modal-title"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"modal-body"]],template:function(e,i){e&1&&(w(0,"div",0),o(1,"div",1)(2,"div",2)(3,"h5",3),d(4,"Coming soon"),l(),o(5,"button",4),D("click",function(){return i.closed.emit()}),d(6,"\xD7"),l()(),o(7,"div",5),d(8," Placeholder modal content. "),l()())},dependencies:[Q],encapsulation:2})};function li(n,t){if(n&1){let e=E();o(0,"div",16)(1,"label",17)(2,"input",18),G("ngModelChange",function(a){M(e);let r=v();return B(r.selectedDateOption,a)||(r.selectedDateOption=a),T(a)}),D("change",function(){M(e);let a=v();return T(a.onDateOptionChange())})("click",function(){let a=M(e).$implicit,r=v();return T(r.onForceOptionChange(a.value))}),l(),d(3),l()()}if(n&2){let e=t.$implicit,i=v();c(),g("for","option-"+e.value),c(),Fe("id","option-",e.value,""),g("value",e.value),H("ngModel",i.selectedDateOption),c(),y(" ",e.label," ")}}function si(n,t){if(n&1){let e=E();o(0,"div",19)(1,"label",20),d(2,"From:"),l(),o(3,"input",21),G("ngModelChange",function(a){M(e);let r=v();return B(r.customFromDate,a)||(r.customFromDate=a),T(a)}),l(),o(4,"label",22),d(5,"To:"),l(),o(6,"input",23),G("ngModelChange",function(a){M(e);let r=v();return B(r.customToDate,a)||(r.customToDate=a),T(a)}),l()()}if(n&2){let e=v();c(3),H("ngModel",e.customFromDate),c(3),H("ngModel",e.customToDate)}}function di(n,t){if(n&1){let e=E();o(0,"div",24)(1,"input",25),D("change",function(){let a=M(e).$implicit,r=v();return T(r.toggleSurface(a._id))}),l(),o(2,"label",26),d(3),l()()}if(n&2){let e=t.$implicit,i=v();c(),g("id","surface-"+e._id)("checked",i.selectedSurfaceIds.includes(e._id)),c(),g("for","surface-"+e._id),c(),y(" ",e.surface," ")}}function ci(n,t){if(n&1){let e=E();o(0,"div",24)(1,"input",25),D("change",function(){let a=M(e).$implicit,r=v();return T(r.toggleTournamentType(a._id))}),l(),o(2,"label",26),d(3),l()()}if(n&2){let e=t.$implicit,i=v();c(),g("id","tournamentType-"+e._id)("checked",i.selectedTournamentTypeIds.includes(e._id)),c(),g("for","tournamentType-"+e._id),c(),y(" ",e.type," ")}}function mi(n,t){if(n&1){let e=E();o(0,"div",24)(1,"input",25),D("change",function(){let a=M(e).$implicit,r=v();return T(r.toggleTournamentLevel(a._id))}),l(),o(2,"label",26),d(3),l()()}if(n&2){let e=t.$implicit,i=v();c(),g("id","tournamentLevel-"+e._id)("checked",i.selectedTournamentLevelIds.includes(e._id)),c(),g("for","tournamentLevel-"+e._id),c(),y(" ",e.level," ")}}var et=class n{closed=new W;filterApplied=new W;resetFilter=new W;surfaceFilterChanged=new W;tournamentTypeFilterChanged=new W;tournamentLevelFilterChanged=new W;activeDateFilter="all";activeFromDate=null;activeToDate=null;activeSurfaceIds=[];activeTournamentTypeIds=[];activeTournamentLevelIds=[];minDate;maxDate;dateOptions=[{label:"All matches",value:"all"},{label:"Last year",value:"year"},{label:"Last month",value:"month"},{label:"Last week",value:"week"},{label:"Custom date range",value:"custom"}];surfaces=[{_id:1,surface:"Indoors"},{_id:2,surface:"Clay"},{_id:3,surface:"Grass"},{_id:4,surface:"Hard"}];tournamentTypes=[{_id:2,type:"ATP"},{_id:4,type:"WTA"}];tournamentLevels=[{_id:1,level:"> 50,000$"},{_id:2,level:"Cup"},{_id:3,level:"Qualifications"},{_id:4,level:"< 50,000$"}];selectedDateOption="all";selectedSurfaceIds=[];selectedTournamentTypeIds=[];selectedTournamentLevelIds=[];customFromDate=null;customToDate=null;ngOnChanges(t){t.activeDateFilter&&(this.selectedDateOption=this.activeDateFilter),this.activeDateFilter==="custom"?(this.customFromDate=this.activeFromDate,this.customToDate=this.activeToDate):(this.customFromDate=null,this.customToDate=null),t.activeSurfaceIds&&(this.selectedSurfaceIds=[...this.activeSurfaceIds]),(!this.selectedSurfaceIds||this.selectedSurfaceIds.length===0)&&(this.selectedSurfaceIds=[1,2,3,4]),t.activeTournamentTypeIds&&(this.selectedTournamentTypeIds=[...this.activeTournamentTypeIds]),(!this.selectedTournamentTypeIds||this.selectedTournamentTypeIds.length===0)&&(this.selectedTournamentTypeIds=[2,4]),t.activeTournamentLevelIds&&(this.selectedTournamentLevelIds=[...this.activeTournamentLevelIds]),(!this.selectedTournamentLevelIds||this.selectedTournamentLevelIds.length===0)&&(this.selectedTournamentLevelIds=[1,2,3,4])}onDateOptionChange(){this.selectedDateOption!=="custom"&&(this.customFromDate=null,this.customToDate=null)}onForceOptionChange(t){this.selectedDateOption===t&&this.onDateOptionChange()}calculateStartDate(t){let e=new Date;switch(t){case"year":e.setFullYear(e.getFullYear()-1);break;case"month":e.setMonth(e.getMonth()-1);break;case"week":e.setDate(e.getDate()-7);break;case"all":default:return null}return e.toISOString().split("T")[0]}close(){this.closed.emit()}apply(){let t={option:this.selectedDateOption,startDate:this.selectedDateOption==="custom"?this.customFromDate:this.calculateStartDate(this.selectedDateOption),endDate:this.selectedDateOption==="custom"?this.customToDate:new Date().toISOString().split("T")[0],surfaceIds:[...this.selectedSurfaceIds],tournamentTypeIds:[...this.selectedTournamentTypeIds],tournamentLevelIds:[...this.selectedTournamentLevelIds]};console.log("\u{1F4E4} Emitting filter from modal:",t),this.filterApplied.emit(t)}toggleSurface(t){let e=this.selectedSurfaceIds.indexOf(t);e>-1?this.selectedSurfaceIds.splice(e,1):this.selectedSurfaceIds.push(t)}toggleTournamentType(t){let e=this.selectedTournamentTypeIds.indexOf(t);e>-1?this.selectedTournamentTypeIds.splice(e,1):this.selectedTournamentTypeIds.push(t)}toggleTournamentLevel(t){let e=this.selectedTournamentLevelIds.indexOf(t);e>-1?this.selectedTournamentLevelIds.splice(e,1):this.selectedTournamentLevelIds.push(t)}reset(){this.selectedDateOption="all",this.customFromDate=null,this.customToDate=null,this.selectedSurfaceIds=[1,2,3,4],this.selectedTournamentTypeIds=[2,4],this.selectedTournamentLevelIds=[1,2,3,4],this.resetFilter.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Y({type:n,selectors:[["app-match-filter-modal"]],inputs:{activeDateFilter:"activeDateFilter",activeFromDate:"activeFromDate",activeToDate:"activeToDate",activeSurfaceIds:"activeSurfaceIds",activeTournamentTypeIds:"activeTournamentTypeIds",activeTournamentLevelIds:"activeTournamentLevelIds",minDate:"minDate",maxDate:"maxDate"},outputs:{closed:"closed",filterApplied:"filterApplied",resetFilter:"resetFilter",surfaceFilterChanged:"surfaceFilterChanged",tournamentTypeFilterChanged:"tournamentTypeFilterChanged",tournamentLevelFilterChanged:"tournamentLevelFilterChanged"},features:[Lt],decls:36,vars:6,consts:[["appAccessibleClick","",1,"modal-backdrop",3,"accessibleClick"],["appTrapFocus","",1,"modal-content",3,"click","onEscape"],["appAccessibleClick","",1,"close-button",3,"accessibleClick"],[1,"text-center"],[1,"modal-body"],[1,"text-start"],[1,"form-label","fw-bold","mb-1"],["class","form-check filter-radio-row",4,"ngFor","ngForOf"],["class","mt-2 ms-3",4,"ngIf"],[1,"text-start","mt-3"],["for","surfaceFilter",1,"form-label","fw-bold","mb-1"],["class","form-check d-flex align-items-center gap-2 ms-3",4,"ngFor","ngForOf"],["for","tournamentTypeFilter",1,"form-label","fw-bold","mb-1"],["for","tournamentLevelFilter",1,"form-label","fw-bold","mb-1"],[1,"text-center","mt-3","d-flex","justify-content-center","gap-4"],[1,"link-button",3,"click"],[1,"form-check","filter-radio-row"],[1,"form-check-label","d-flex","align-items-center",3,"for"],["type","radio","name","dateFilter",1,"form-check-input","me-2",3,"ngModelChange","change","click","value","ngModel","id"],[1,"mt-2","ms-3"],["for","fromDate",1,"form-label"],["id","fromDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],["for","toDate",1,"form-label","mt-2"],["id","toDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check","d-flex","align-items-center","gap-2","ms-3"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label","mb-0",3,"for"]],template:function(e,i){e&1&&(o(0,"div",0),D("accessibleClick",function(){return i.close()}),o(1,"div",1),D("click",function(r){return r.stopPropagation()}),o(2,"button",2),D("accessibleClick",function(){return i.close()}),d(3,"\xD7"),l(),o(4,"h5",3),d(5,"Filter Matches"),l(),w(6,"br"),o(7,"div",4)(8,"div",5)(9,"p",6),d(10,"Filter by Date:"),l(),_(11,li,4,6,"div",7)(12,si,7,2,"div",8),l(),w(13,"hr"),o(14,"div",9)(15,"label",10),d(16,"Filter by Surface:"),l(),o(17,"div",9),_(18,di,4,4,"div",11),l()()(),w(19,"hr"),o(20,"div",9)(21,"label",12),d(22,"Filter by Tournament Type:"),l(),o(23,"div",9),_(24,ci,4,4,"div",11),l()(),w(25,"hr"),o(26,"div",9)(27,"label",13),d(28,"Filter by Tournament Level:"),l(),o(29,"div",9),_(30,mi,4,4,"div",11),l()(),o(31,"div",14)(32,"button",15),D("click",function(){return i.apply()}),d(33,"Apply"),l(),o(34,"button",15),D("click",function(){return i.reset()}),d(35,"Reset"),l()()()()),e&2&&(c(),g("onEscape",i.close),c(10),g("ngForOf",i.dateOptions),c(),g("ngIf",i.selectedDateOption==="custom"),c(6),g("ngForOf",i.surfaces),c(6),g("ngForOf",i.tournamentTypes),c(6),g("ngForOf",i.tournamentLevels))},dependencies:[Q,ve,xe,be,Ue,Je,Ke,qe,on,ln],encapsulation:2})};var un={modes:{point(n,t){return tt(n,t,{intersect:!0})},nearest(n,t,e){return hi(n,t,e)},x(n,t,e){return tt(n,t,{intersect:e.intersect,axis:"x"})},y(n,t,e){return tt(n,t,{intersect:e.intersect,axis:"y"})}}};function Ct(n,t,e){return(un.modes[e.mode]||un.modes.nearest)(n,t,e)}function ui(n,t,e){return e!=="x"&&e!=="y"?n.inRange(t.x,t.y,"x",!0)||n.inRange(t.x,t.y,"y",!0):n.inRange(t.x,t.y,e,!0)}function pi(n,t,e){return e==="x"?{x:n.x,y:t.y}:e==="y"?{x:t.x,y:n.y}:t}function tt(n,t,e){return n.filter(i=>e.intersect?i.inRange(t.x,t.y):ui(i,t,e.axis))}function hi(n,t,e){let i=Number.POSITIVE_INFINITY;return tt(n,t,e).reduce((a,r)=>{let s=r.getCenterPoint(),m=pi(t,s,e.axis),u=Ae(t,m);return u<i?(a=[r],i=u):u===i&&a.push(r),a},[]).sort((a,r)=>a._index-r._index).slice(0,1)}function he(n,t,e){let i=Math.cos(e),a=Math.sin(e),r=t.x,s=t.y;return{x:r+i*(n.x-r)-a*(n.y-s),y:s+a*(n.x-r)+i*(n.y-s)}}var fi=(n,t)=>t>n||n.length>t.length&&n.slice(0,t.length)===t,ce=.001,it=(n,t,e)=>Math.min(e,Math.max(t,n)),Fn=(n,t)=>n.value>=n.start-t&&n.value<=n.end+t;function gi(n,t,e){for(let i of Object.keys(n))n[i]=it(n[i],t,e);return n}function vi(n,t,e,i){return!n||!t||e<=0?!1:Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)<=Math.pow(e+i,2)}function On(n,{x:t,y:e,x2:i,y2:a},r,{borderWidth:s,hitTolerance:m}){let u=(s+m)/2,p=n.x>=t-u-ce&&n.x<=i+u+ce,h=n.y>=e-u-ce&&n.y<=a+u+ce;return r==="x"?p:(r==="y"||p)&&h}function An(n,{rect:t,center:e},i,{rotation:a,borderWidth:r,hitTolerance:s}){let m=he(n,e,$(-a));return On(m,t,i,{borderWidth:r,hitTolerance:s})}function fe(n,t){let{centerX:e,centerY:i}=n.getProps(["centerX","centerY"],t);return{x:e,y:i}}function xi(n,t,e,i=!0){let a=e.split("."),r=0;for(let s of t.split(".")){let m=a[r++];if(parseInt(s,10)<parseInt(m,10))break;if(fi(m,s)){if(i)throw new Error(`${n} v${e} is not supported. v${t} or newer is required.`);return!1}}return!0}var Rn=n=>typeof n=="string"&&n.endsWith("%"),Ln=n=>parseFloat(n)/100,Vn=n=>it(Ln(n),0,1),Le=(n,t)=>({x:n,y:t,x2:n,y2:t,width:0,height:0}),yi={box:n=>Le(n.centerX,n.centerY),doughnutLabel:n=>Le(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>Le(n.centerX,n.centerY),line:n=>Le(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>Le(n.centerX,n.centerY)};function It(n,t){return t==="start"?0:t==="end"?n:Rn(t)?Vn(t)*n:n/2}function re(n,t,e=!0){return typeof t=="number"?t:Rn(t)?(e?Vn(t):Ln(t))*n:n}function Si(n,t){let{x:e,width:i}=n,a=t.textAlign;return a==="center"?e+i/2:a==="end"||a==="right"?e+i:e}function Wn(n,t,{borderWidth:e,position:i,xAdjust:a,yAdjust:r},s){let m=ee(s),u=t.width+(m?s.width:0)+e,p=t.height+(m?s.height:0)+e,h=wt(i),x=pn(n.x,u,a,h.x),S=pn(n.y,p,r,h.y);return{x,y:S,x2:x+u,y2:S+p,width:u,height:p,centerX:x+u/2,centerY:S+p/2}}function wt(n,t="center"){return ee(n)?{x:se(n.x,t),y:se(n.y,t)}:(n=se(n,t),{x:n,y:n})}var Nn=(n,t)=>n&&n.autoFit&&t<1;function $n(n,t){let e=n.font,i=Z(e)?e:[e];return Nn(n,t)?i.map(function(a){let r=Re(a);return r.size=Math.floor(a.size*t),r.lineHeight=a.lineHeight,Re(r)}):i.map(a=>Re(a))}function jn(n){return n&&(N(n.xValue)||N(n.yValue))}function pn(n,t,e=0,i){return n-It(t,i)+e}function Ie(n,t,e){let i=e.init;if(i){if(i===!0)return Bn(t,e)}else return;return _i(n,t,e)}function Hn(n,t,e){let i=!1;return t.forEach(a=>{te(n[a])?(i=!0,e[a]=n[a]):N(e[a])&&delete e[a]}),i}function Bn(n,t){let e=t.type||"line";return yi[e](n)}function _i(n,t,e){let i=Oe(e.init,[{chart:n,properties:t,options:e}]);if(i===!0)return Bn(t,e);if(ee(i))return i}var xt=new Map,bi=n=>isNaN(n)||n<=0,Mi=n=>n.reduce(function(t,e){return t+=e.string,t},"");function at(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function rt(n,{x:t,y:e},i){i&&(n.translate(t,e),n.rotate($(i)),n.translate(-t,-e))}function z(n,t){if(t&&t.borderWidth)return n.lineCap=t.borderCapStyle||"butt",n.setLineDash(t.borderDash),n.lineDashOffset=t.borderDashOffset,n.lineJoin=t.borderJoinStyle||"miter",n.lineWidth=t.borderWidth,n.strokeStyle=t.borderColor,!0}function we(n,t){n.shadowColor=t.backgroundShadowColor,n.shadowBlur=t.shadowBlur,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY}function ot(n,t){let e=t.content;if(at(e))return{width:re(e.width,t.width),height:re(e.height,t.height)};let i=$n(t),a=t.textStrokeWidth,r=Z(e)?e:[e],s=r.join()+Mi(i)+a+(n._measureText?"-spriting":"");return xt.has(s)||xt.set(s,Ii(n,r,i,a)),xt.get(s)}function Gn(n,t,e){let{x:i,y:a,width:r,height:s}=t;n.save(),we(n,e);let m=z(n,e);n.fillStyle=e.backgroundColor,n.beginPath(),ft(n,{x:i,y:a,w:r,h:s,radius:gi(gt(e.borderRadius),0,Math.min(r,s)/2)}),n.closePath(),n.fill(),m&&(n.shadowColor=e.borderShadowColor,n.stroke()),n.restore()}function zn(n,t,e,i){let a=e.content;if(at(a)){n.save(),n.globalAlpha=ki(e.opacity,a.style.opacity),n.drawImage(a,t.x,t.y,t.width,t.height),n.restore();return}let r=Z(a)?a:[a],s=$n(e,i),m=e.color,u=Z(m)?m:[m],p=Si(t,e),h=t.y+e.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=e.textAlign,Ti(n,e)&&wi(n,{x:p,y:h},r,s),Ei(n,{x:p,y:h},r,{fonts:s,colors:u}),n.restore()}function Ti(n,t){if(t.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=t.textStrokeWidth,n.strokeStyle=t.textStrokeColor,!0}function Di(n,t,e,i){let{radius:a,options:r}=t,s=r.pointStyle,m=r.rotation,u=(m||0)*Ge;if(at(s)){n.save(),n.translate(e,i),n.rotate(u),n.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),n.restore();return}bi(a)||Ci(n,{x:e,y:i,radius:a,rotation:m,style:s,rad:u})}function Ci(n,{x:t,y:e,radius:i,rotation:a,style:r,rad:s}){let m,u,p,h;switch(n.beginPath(),r){default:n.arc(t,e,i,0,Be),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(s)*i,e-Math.cos(s)*i),s+=ze,n.lineTo(t+Math.sin(s)*i,e-Math.cos(s)*i),s+=ze,n.lineTo(t+Math.sin(s)*i,e-Math.cos(s)*i),n.closePath();break;case"rectRounded":h=i*.516,p=i-h,m=Math.cos(s+de)*p,u=Math.sin(s+de)*p,n.arc(t-m,e-u,h,s-A,s-ye),n.arc(t+u,e-m,h,s-ye,s),n.arc(t+m,e+u,h,s,s+ye),n.arc(t-u,e+m,h,s+ye,s+A),n.closePath();break;case"rect":if(!a){p=Math.SQRT1_2*i,n.rect(t-p,e-p,2*p,2*p);break}s+=de;case"rectRot":m=Math.cos(s)*i,u=Math.sin(s)*i,n.moveTo(t-m,e-u),n.lineTo(t+u,e-m),n.lineTo(t+m,e+u),n.lineTo(t-u,e+m),n.closePath();break;case"crossRot":s+=de;case"cross":m=Math.cos(s)*i,u=Math.sin(s)*i,n.moveTo(t-m,e-u),n.lineTo(t+m,e+u),n.moveTo(t+u,e-m),n.lineTo(t-u,e+m);break;case"star":m=Math.cos(s)*i,u=Math.sin(s)*i,n.moveTo(t-m,e-u),n.lineTo(t+m,e+u),n.moveTo(t+u,e-m),n.lineTo(t-u,e+m),s+=de,m=Math.cos(s)*i,u=Math.sin(s)*i,n.moveTo(t-m,e-u),n.lineTo(t+m,e+u),n.moveTo(t+u,e-m),n.lineTo(t-u,e+m);break;case"line":m=Math.cos(s)*i,u=Math.sin(s)*i,n.moveTo(t-m,e-u),n.lineTo(t+m,e+u);break;case"dash":n.moveTo(t,e),n.lineTo(t+Math.cos(s)*i,e+Math.sin(s)*i);break}n.fill()}function Ii(n,t,e,i){n.save();let a=t.length,r=0,s=i;for(let m=0;m<a;m++){let u=e[Math.min(m,e.length-1)];n.font=u.string;let p=t[m];r=Math.max(r,n.measureText(p).width+i),s+=u.lineHeight}return n.restore(),{width:r,height:s}}function wi(n,{x:t,y:e},i,a){n.beginPath();let r=0;i.forEach(function(s,m){let u=a[Math.min(m,a.length-1)],p=u.lineHeight;n.font=u.string,n.strokeText(s,t,e+p/2+r),r+=p}),n.stroke()}function Ei(n,{x:t,y:e},i,{fonts:a,colors:r}){let s=0;i.forEach(function(m,u){let p=r[Math.min(u,r.length-1)],h=a[Math.min(u,a.length-1)],x=h.lineHeight;n.beginPath(),n.font=h.string,n.fillStyle=p,n.fillText(m,t,e+x/2+s),s+=x,n.fill()})}function ki(n,t){let e=Ye(n)?n:t;return Ye(e)?it(e,0,1):1}var Yn=["left","bottom","top","right"];function Pi(n,t){let{pointX:e,pointY:i,options:a}=t,r=a.callout,s=r&&r.display&&Li(t,r);if(!s||Wi(t,r,s))return;if(n.save(),n.beginPath(),!z(n,r))return n.restore();let{separatorStart:u,separatorEnd:p}=Fi(t,s),{sideStart:h,sideEnd:x}=Ai(t,s,u);(r.margin>0||a.borderWidth===0)&&(n.moveTo(u.x,u.y),n.lineTo(p.x,p.y)),n.moveTo(h.x,h.y),n.lineTo(x.x,x.y);let S=he({x:e,y:i},t.getCenterPoint(),$(-t.rotation));n.lineTo(S.x,S.y),n.stroke(),n.restore()}function Fi(n,t){let{x:e,y:i,x2:a,y2:r}=n,s=Oi(n,t),m,u;return t==="left"||t==="right"?(m={x:e+s,y:i},u={x:m.x,y:r}):(m={x:e,y:i+s},u={x:a,y:m.y}),{separatorStart:m,separatorEnd:u}}function Oi(n,t){let{width:e,height:i,options:a}=n,r=a.callout.margin+a.borderWidth/2;return t==="right"?e+r:t==="bottom"?i+r:-r}function Ai(n,t,e){let{y:i,width:a,height:r,options:s}=n,m=s.callout.start,u=Ri(t,s.callout),p,h;return t==="left"||t==="right"?(p={x:e.x,y:i+re(r,m)},h={x:p.x+u,y:p.y}):(p={x:e.x+re(a,m),y:e.y},h={x:p.x,y:p.y+u}),{sideStart:p,sideEnd:h}}function Ri(n,t){let e=t.side;return n==="left"||n==="top"?-e:e}function Li(n,t){let e=t.position;return Yn.includes(e)?e:Vi(n,t)}function Vi(n,t){let{x:e,y:i,x2:a,y2:r,width:s,height:m,pointX:u,pointY:p,centerX:h,centerY:x,rotation:S}=n,C={x:h,y:x},I=t.start,O=re(s,I),P=re(m,I),k=[e,e+O,e+O,a],b=[i+P,r,i,r],F=[];for(let V=0;V<4;V++){let dt=he({x:k[V],y:b[V]},C,$(S));F.push({position:Yn[V],distance:Ae(dt,{x:u,y:p})})}return F.sort((V,dt)=>V.distance-dt.distance)[0].position}function Wi(n,t,e){let{pointX:i,pointY:a}=n,r=t.margin,s=i,m=a;return e==="left"?s+=r:e==="right"?s-=r:e==="top"?m+=r:e==="bottom"&&(m-=r),n.inRange(s,m)}var hn={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Me(n,t,e){return t=typeof t=="number"?t:n.parse(t),He(t)?n.getPixelForValue(t):e}function me(n,t,e){let i=t[e];if(i||e==="scaleID")return i;let a=e.charAt(0),r=Object.values(n).filter(s=>s.axis&&s.axis===a);return r.length?r[0].id:a}function Xn(n,t){if(n){let e=n.options.reverse,i=Me(n,t.min,e?t.end:t.start),a=Me(n,t.max,e?t.start:t.end);return{start:i,end:a}}}function Un(n,t){let{chartArea:e,scales:i}=n,a=i[me(i,t,"xScaleID")],r=i[me(i,t,"yScaleID")],s=e.width/2,m=e.height/2;return a&&(s=Me(a,t.xValue,a.left+a.width/2)),r&&(m=Me(r,t.yValue,r.top+r.height/2)),{x:s,y:m}}function Et(n,t){let e=n.scales,i=e[me(e,t,"xScaleID")],a=e[me(e,t,"yScaleID")];if(!i&&!a)return{};let{left:r,right:s}=i||n.chartArea,{top:m,bottom:u}=a||n.chartArea,p=fn(i,{min:t.xMin,max:t.xMax,start:r,end:s});r=p.start,s=p.end;let h=fn(a,{min:t.yMin,max:t.yMax,start:u,end:m});return m=h.start,u=h.end,{x:r,y:m,x2:s,y2:u,width:s-r,height:u-m,centerX:r+(s-r)/2,centerY:m+(u-m)/2}}function Kn(n,t){if(!jn(t)){let e=Et(n,t),i=t.radius;(!i||isNaN(i))&&(i=Math.min(e.width,e.height)/2,t.radius=i);let a=i*2,r=e.centerX+t.xAdjust,s=e.centerY+t.yAdjust;return{x:r-i,y:s-i,x2:r+i,y2:s+i,centerX:r,centerY:s,width:a,height:a,radius:i}}return $i(n,t)}function Ni(n,t){let{scales:e,chartArea:i}=n,a=e[t.scaleID],r={x:i.left,y:i.top,x2:i.right,y2:i.bottom};return a?ji(a,r,t):Hi(e,r,t),r}function qn(n,t){let e=Et(n,t);return e.initProperties=Ie(n,e,t),e.elements=[{type:"label",optionScope:"label",properties:zi(n,e,t),initProperties:e.initProperties}],e}function $i(n,t){let e=Un(n,t),i=t.radius*2;return{x:e.x-t.radius+t.xAdjust,y:e.y-t.radius+t.yAdjust,x2:e.x+t.radius+t.xAdjust,y2:e.y+t.radius+t.yAdjust,centerX:e.x+t.xAdjust,centerY:e.y+t.yAdjust,radius:t.radius,width:i,height:i}}function fn(n,t){let e=Xn(n,t)||t;return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}function ji(n,t,e){let i=Me(n,e.value,NaN),a=Me(n,e.endValue,i);n.isHorizontal()?(t.x=i,t.x2=a):(t.y=i,t.y2=a)}function Hi(n,t,e){for(let i of Object.keys(hn)){let a=n[me(n,e,i)];if(a){let{min:r,max:s,start:m,end:u,startProp:p,endProp:h}=hn[i],x=Xn(a,{min:e[r],max:e[s],start:a[m],end:a[u]});t[p]=x.start,t[h]=x.end}}}function Bi({properties:n,options:t},e,i,a){let{x:r,x2:s,width:m}=n;return Jn({start:r,end:s,size:m,borderWidth:t.borderWidth},{position:i.x,padding:{start:a.left,end:a.right},adjust:t.label.xAdjust,size:e.width})}function Gi({properties:n,options:t},e,i,a){let{y:r,y2:s,height:m}=n;return Jn({start:r,end:s,size:m,borderWidth:t.borderWidth},{position:i.y,padding:{start:a.top,end:a.bottom},adjust:t.label.yAdjust,size:e.height})}function Jn(n,t){let{start:e,end:i,borderWidth:a}=n,{position:r,padding:{start:s,end:m},adjust:u}=t,p=i-a-e-s-m-t.size;return e+a/2+u+It(p,r)}function zi(n,t,e){let i=e.label;i.backgroundColor="transparent",i.callout.display=!1;let a=wt(i.position),r=Se(i.padding),s=ot(n.ctx,i),m=Bi({properties:t,options:e},s,a,r),u=Gi({properties:t,options:e},s,a,r),p=s.width+r.width,h=s.height+r.height;return{x:m,y:u,x2:m+p,y2:u+h,width:p,height:h,centerX:m+p/2,centerY:u+h/2,rotation:i.rotation}}var yt=["enter","leave"],kt=yt.concat("click");function Yi(n,t,e){t.listened=Hn(e,kt,t.listeners),t.moveListened=!1,yt.forEach(i=>{te(e[i])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(i=>{!t.listened&&te(i.click)&&(t.listened=!0),t.moveListened||yt.forEach(a=>{te(i[a])&&(t.listened=!0,t.moveListened=!0)})})}function Xi(n,t,e){if(n.listened)switch(t.type){case"mousemove":case"mouseout":return Ui(n,t,e);case"click":return Ki(n,t,e)}}function Ui(n,t,e){if(!n.moveListened)return;let i;t.type==="mousemove"?i=Ct(n.visibleElements,t,e.interaction):i=[];let a=n.hovered;n.hovered=i;let r={state:n,event:t},s=gn(r,"leave",a,i);return gn(r,"enter",i,a)||s}function gn({state:n,event:t},e,i,a){let r;for(let s of i)a.indexOf(s)<0&&(r=Qn(s.options[e]||n.listeners[e],s,t)||r);return r}function Ki(n,t,e){let i=n.listeners,a=Ct(n.visibleElements,t,e.interaction),r;for(let s of a)r=Qn(s.options.click||i.click,s,t)||r;return r}function Qn(n,t,e){return Oe(n,[t.$context,e])===!0}var nt=["afterDraw","beforeDraw"];function qi(n,t,e){let i=t.visibleElements;t.hooked=Hn(e,nt,t.hooks),t.hooked||i.forEach(a=>{t.hooked||nt.forEach(r=>{te(a.options[r])&&(t.hooked=!0)})})}function vn(n,t,e){if(n.hooked){let i=t.options[e]||n.hooks[e];return Oe(i,[t.$context])}}function Ji(n,t,e){let i=na(n.scales,t,e),a=xn(t,i,"min","suggestedMin");a=xn(t,i,"max","suggestedMax")||a,a&&te(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function Qi(n,t){for(let e of n)ea(e,t)}function xn(n,t,e,i){if(He(t[e])&&!Zi(n.options,e,i)){let a=n[e]!==t[e];return n[e]=t[e],a}}function Zi(n,t,e){return N(n[t])||N(n[e])}function ea(n,t){for(let e of["scaleID","xScaleID","yScaleID"]){let i=me(t,n,e);i&&!t[i]&&ta(n,e)&&console.warn(`No scale found with id '${i}' for annotation '${n.id}'`)}}function ta(n,t){if(t==="scaleID")return!0;let e=t.charAt(0);for(let i of["Min","Max","Value"])if(N(n[e+i]))return!0;return!1}function na(n,t,e){let i=t.axis,a=t.id,r=i+"ScaleID",s={min:se(t.min,Number.NEGATIVE_INFINITY),max:se(t.max,Number.POSITIVE_INFINITY)};for(let m of e)m.scaleID===a?yn(m,t,["value","endValue"],s):me(n,m,r)===a&&yn(m,t,[i+"Min",i+"Max",i+"Value"],s);return s}function yn(n,t,e,i){for(let a of e){let r=n[a];if(N(r)){let s=t.parse(r);i.min=Math.min(i.min,s),i.max=Math.max(i.max,s)}}}var oe=class extends ne{inRange(t,e,i,a){let{x:r,y:s}=he({x:t,y:e},this.getCenterPoint(a),$(-this.options.rotation));return On({x:r,y:s},this.getProps(["x","y","x2","y2"],a),i,this.options)}getCenterPoint(t){return fe(this,t)}draw(t){t.save(),rt(t,this.getCenterPoint(),this.options.rotation),Gn(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return qn(t,e)}};oe.id="boxAnnotation";oe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};oe.defaultRoutes={borderColor:"color",backgroundColor:"color"};oe.descriptors={label:{_fallback:!0}};var Te=class extends ne{inRange(t,e,i,a){return An({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],a),center:this.getCenterPoint(a)},i,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return fe(this,t)}draw(t){let e=this.options;!e.display||!e.content||(sa(t,this),t.save(),rt(t,this.getCenterPoint(),this.rotation),zn(t,this,e,this._fitRatio),t.restore())}resolveElementProperties(t,e){let i=ia(t,e);if(!i)return{};let{controllerMeta:a,point:r,radius:s}=ra(t,e,i),m=ot(t.ctx,e),u=oa(m,s);Nn(e,u)&&(m={width:m.width*u,height:m.height*u});let{position:p,xAdjust:h,yAdjust:x}=e,S=Wn(r,m,{borderWidth:0,position:p,xAdjust:h,yAdjust:x});return ct(ke(ke({initProperties:Ie(t,S,e)},S),a),{rotation:e.rotation,_fitRatio:u})}};Te.id="doughnutLabelAnnotation";Te.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Te.defaultRoutes={};function ia(n,t){return n.getSortedVisibleDatasetMetas().reduce(function(e,i){let a=i.controller;return a instanceof Jt&&aa(n,t,i.data)&&(!e||a.innerRadius<e.controller.innerRadius)&&a.options.circumference>=90?i:e},void 0)}function aa(n,t,e){if(!t.autoHide)return!0;for(let i=0;i<e.length;i++)if(!e[i].hidden&&n.getDataVisibility(i))return!0}function ra({chartArea:n},t,e){let{left:i,top:a,right:r,bottom:s}=n,{innerRadius:m,offsetX:u,offsetY:p}=e.controller,h=(i+r)/2+u,x=(a+s)/2+p,S={left:Math.max(h-m,i),right:Math.min(h+m,r),top:Math.max(x-m,a),bottom:Math.min(x+m,s)},C={x:(S.left+S.right)/2,y:(S.top+S.bottom)/2},I=t.spacing+t.borderWidth/2,O=m-I,P=C.y>x,k=P?a+I:s-I,b=la(k,h,x,O);return{controllerMeta:ke({_centerX:h,_centerY:x,_radius:O,_counterclockwise:P},b),point:C,radius:Math.min(m,Math.min(S.right-S.left,S.bottom-S.top)/2)}}function oa({width:n,height:t},e){let i=Math.sqrt(Math.pow(n,2)+Math.pow(t,2));return e*2/i}function la(n,t,e,i){let a=Math.pow(e-n,2),r=Math.pow(i,2),s=t*-2,m=Math.pow(t,2)+a-r,u=Math.pow(s,2)-4*m;if(u<=0)return{_startAngle:0,_endAngle:Be};let p=(-s-Math.sqrt(u))/2,h=(-s+Math.sqrt(u))/2;return{_startAngle:Xe({x:t,y:e},{x:p,y:n}).angle,_endAngle:Xe({x:t,y:e},{x:h,y:n}).angle}}function sa(n,t){let{_centerX:e,_centerY:i,_radius:a,_startAngle:r,_endAngle:s,_counterclockwise:m,options:u}=t;n.save();let p=z(n,u);n.fillStyle=u.backgroundColor,n.beginPath(),n.arc(e,i,a,r,s,m),n.closePath(),n.fill(),p&&n.stroke(),n.restore()}var ue=class extends ne{inRange(t,e,i,a){return An({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],a),center:this.getCenterPoint(a)},i,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return fe(this,t)}draw(t){let e=this.options,i=!N(this._visible)||this._visible;!e.display||!e.content||!i||(t.save(),rt(t,this.getCenterPoint(),this.rotation),Pi(t,this),Gn(t,this,e),zn(t,da(this),e),t.restore())}resolveElementProperties(t,e){let i;if(jn(e))i=Un(t,e);else{let{centerX:m,centerY:u}=Et(t,e);i={x:m,y:u}}let a=Se(e.padding),r=ot(t.ctx,e),s=Wn(i,r,e,a);return ct(ke({initProperties:Ie(t,s,e),pointX:i.x,pointY:i.y},s),{rotation:e.rotation})}};ue.id="labelAnnotation";ue.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};ue.defaultRoutes={borderColor:"color"};function da({x:n,y:t,width:e,height:i,options:a}){let r=a.borderWidth/2,s=Se(a.padding);return{x:n+s.left+r,y:t+s.top+r,width:e-s.left-s.right-a.borderWidth,height:i-s.top-s.bottom-a.borderWidth}}var Pt=(n,t,e)=>({x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}),St=(n,t,e)=>Pt(t,e,Math.abs((n-t.y)/(e.y-t.y))).x,Sn=(n,t,e)=>Pt(t,e,Math.abs((n-t.x)/(e.x-t.x))).y,We=n=>n*n,ca=(n,t,{x:e,y:i,x2:a,y2:r},s)=>s==="y"?{start:Math.min(i,r),end:Math.max(i,r),value:t}:{start:Math.min(e,a),end:Math.max(e,a),value:n},_n=(n,t,e,i)=>(1-i)*(1-i)*n+2*(1-i)*i*t+i*i*e,_t=(n,t,e,i)=>({x:_n(n.x,t.x,e.x,i),y:_n(n.y,t.y,e.y,i)}),bn=(n,t,e,i)=>2*(1-i)*(t-n)+2*i*(e-t),Mn=(n,t,e,i)=>-Math.atan2(bn(n.x,t.x,e.x,i),bn(n.y,t.y,e.y,i))+.5*A,lt=(()=>{class n extends ne{inRange(e,i,a,r){let s=(this.options.borderWidth+this.options.hitTolerance)/2;if(a!=="x"&&a!=="y"){let m={mouseX:e,mouseY:i},{path:u,ctx:p}=this;if(u){z(p,this.options),p.lineWidth+=this.options.hitTolerance;let{chart:x}=this.$context,S=e*x.currentDevicePixelRatio,C=i*x.currentDevicePixelRatio,I=p.isPointInStroke(u,S,C)||bt(this,m,r);return p.restore(),I}let h=We(s);return ha(this,m,h,r)||bt(this,m,r)}return ma(this,{mouseX:e,mouseY:i},a,{hitSize:s,useFinalPosition:r})}getCenterPoint(e){return fe(this,e)}draw(e){let{x:i,y:a,x2:r,y2:s,cp:m,options:u}=this;if(e.save(),!z(e,u))return e.restore();we(e,u);let p=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-a,2));if(u.curve&&m)return ba(e,this,m,p),e.restore();let{startOpts:h,endOpts:x,startAdjust:S,endAdjust:C}=Zn(this),I=Math.atan2(s-a,r-i);e.translate(i,a),e.rotate(I),e.beginPath(),e.moveTo(0+S,0),e.lineTo(p-C,0),e.shadowColor=u.borderShadowColor,e.stroke(),Mt(e,0,S,h),Mt(e,p,-C,x),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,i){let a=Ni(e,i),{x:r,y:s,x2:m,y2:u}=a,p=ua(a,e.chartArea),h=p?pa({x:r,y:s},{x:m,y:u},e.chartArea):{x:r,y:s,x2:m,y2:u,width:Math.abs(m-r),height:Math.abs(u-s)};if(h.centerX=(m+r)/2,h.centerY=(u+s)/2,h.initProperties=Ie(e,h,i),i.curve){let S={x:h.x,y:h.y},C={x:h.x2,y:h.y2};h.cp=_a(h,i,Ae(S,C))}let x=fa(e,h,i.label);return x._visible=p,h.elements=[{type:"label",optionScope:"label",properties:x,initProperties:h.initProperties}],h}}return n.id="lineAnnotation",n})(),Tn={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};lt.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Tn),fill:!1,length:12,start:Object.assign({},Tn),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},ue.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};lt.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};lt.defaultRoutes={borderColor:"color"};function ma(n,{mouseX:t,mouseY:e},i,{hitSize:a,useFinalPosition:r}){let s=ca(t,e,n.getProps(["x","y","x2","y2"],r),i);return Fn(s,a)||bt(n,{mouseX:t,mouseY:e},r,i)}function ua({x:n,y:t,x2:e,y2:i},{top:a,right:r,bottom:s,left:m}){return!(n<m&&e<m||n>r&&e>r||t<a&&i<a||t>s&&i>s)}function Dn({x:n,y:t},e,{top:i,right:a,bottom:r,left:s}){return n<s&&(t=Sn(s,{x:n,y:t},e),n=s),n>a&&(t=Sn(a,{x:n,y:t},e),n=a),t<i&&(n=St(i,{x:n,y:t},e),t=i),t>r&&(n=St(r,{x:n,y:t},e),t=r),{x:n,y:t}}function pa(n,t,e){let{x:i,y:a}=Dn(n,t,e),{x:r,y:s}=Dn(t,n,e);return{x:i,y:a,x2:r,y2:s,width:Math.abs(r-i),height:Math.abs(s-a)}}function ha(n,{mouseX:t,mouseY:e},i=ce,a){let{x:r,y:s,x2:m,y2:u}=n.getProps(["x","y","x2","y2"],a),p=m-r,h=u-s,x=We(p)+We(h),S=x===0?-1:((t-r)*p+(e-s)*h)/x,C,I;return S<0?(C=r,I=s):S>1?(C=m,I=u):(C=r+S*p,I=s+S*h),We(t-C)+We(e-I)<=i}function bt(n,{mouseX:t,mouseY:e},i,a){let r=n.label;return r.options.display&&r.inRange(t,e,a,i)}function fa(n,t,e){let i=e.borderWidth,a=Se(e.padding),r=ot(n.ctx,e),s=r.width+a.width+i,m=r.height+a.height+i;return va(t,e,{width:s,height:m,padding:a},n.chartArea)}function ga(n){let{x:t,y:e,x2:i,y2:a}=n,r=Math.atan2(a-e,i-t);return r>A/2?r-A:r<A/-2?r+A:r}function va(n,t,e,i){let{width:a,height:r,padding:s}=e,{xAdjust:m,yAdjust:u}=t,p={x:n.x,y:n.y},h={x:n.x2,y:n.y2},x=t.rotation==="auto"?ga(n):$(t.rotation),S=xa(a,r,x),C=ya(n,t,{labelSize:S,padding:s},i),I=n.cp?_t(p,n.cp,h,C):Pt(p,h,C),O={size:S.w,min:i.left,max:i.right,padding:s.left},P={size:S.h,min:i.top,max:i.bottom,padding:s.top},k=In(I.x,O)+m,b=In(I.y,P)+u;return{x:k-a/2,y:b-r/2,x2:k+a/2,y2:b+r/2,centerX:k,centerY:b,pointX:I.x,pointY:I.y,width:a,height:r,rotation:ut(x)}}function xa(n,t,e){let i=Math.cos(e),a=Math.sin(e);return{w:Math.abs(n*i)+Math.abs(t*a),h:Math.abs(n*a)+Math.abs(t*i)}}function ya(n,t,e,i){let a,r=Sa(n,i);return t.position==="start"?a=Cn({w:n.x2-n.x,h:n.y2-n.y},e,t,r):t.position==="end"?a=1-Cn({w:n.x-n.x2,h:n.y-n.y2},e,t,r):a=It(1,t.position),a}function Cn(n,t,e,i){let{labelSize:a,padding:r}=t,s=n.w*i.dx,m=n.h*i.dy,u=s>0&&(a.w/2+r.left-i.x)/s,p=m>0&&(a.h/2+r.top-i.y)/m;return it(Math.max(u,p),0,.25)}function Sa(n,t){let{x:e,x2:i,y:a,y2:r}=n,s=Math.min(a,r)-t.top,m=Math.min(e,i)-t.left,u=t.bottom-Math.max(a,r),p=t.right-Math.max(e,i);return{x:Math.min(m,p),y:Math.min(s,u),dx:m<=p?1:-1,dy:s<=u?1:-1}}function In(n,t){let{size:e,min:i,max:a,padding:r}=t,s=e/2;return e>a-i?(a+i)/2:(i>=n-r-s&&(n=i+r+s),a<=n+r+s&&(n=a-r-s),n)}function Zn(n){let t=n.options,e=t.arrowHeads&&t.arrowHeads.start,i=t.arrowHeads&&t.arrowHeads.end;return{startOpts:e,endOpts:i,startAdjust:wn(n,e),endAdjust:wn(n,i)}}function wn(n,t){if(!t||!t.display)return 0;let{length:e,width:i}=t,a=n.options.borderWidth/2,r={x:e,y:i+a};return Math.abs(St(0,r,{x:0,y:a}))}function Mt(n,t,e,i){if(!i||!i.display)return;let{length:a,width:r,fill:s,backgroundColor:m,borderColor:u}=i,p=Math.abs(t-a)+e;n.beginPath(),we(n,i),z(n,i),n.moveTo(p,-r),n.lineTo(t+e,0),n.lineTo(p,r),s===!0?(n.fillStyle=m||u,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=i.borderShadowColor,n.stroke()}function _a(n,t,e){let{x:i,y:a,x2:r,y2:s,centerX:m,centerY:u}=n,p=Math.atan2(s-a,r-i),h=wt(t.controlPoint,0),x={x:m+re(e,h.x,!1),y:u+re(e,h.y,!1)};return he(x,{x:m,y:u},p)}function En(n,{x:t,y:e},{angle:i,adjust:a},r){!r||!r.display||(n.save(),n.translate(t,e),n.rotate(i),Mt(n,0,-a,r),n.restore())}function ba(n,t,e,i){let{x:a,y:r,x2:s,y2:m,options:u}=t,{startOpts:p,endOpts:h,startAdjust:x,endAdjust:S}=Zn(t),C={x:a,y:r},I={x:s,y:m},O=Mn(C,e,I,0),P=Mn(C,e,I,1)-A,k=_t(C,e,I,x/i),b=_t(C,e,I,1-S/i),F=new Path2D;n.beginPath(),F.moveTo(k.x,k.y),F.quadraticCurveTo(e.x,e.y,b.x,b.y),n.shadowColor=u.borderShadowColor,n.stroke(F),t.path=F,t.ctx=n,En(n,k,{angle:O,adjust:x},p),En(n,b,{angle:P,adjust:S},h)}var pe=class extends ne{inRange(t,e,i,a){let r=this.options.rotation,s=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y")return Ma({x:t,y:e},this.getProps(["width","height","centerX","centerY"],a),r,s);let{x:m,y:u,x2:p,y2:h}=this.getProps(["x","y","x2","y2"],a),x=i==="y"?{start:u,end:h}:{start:m,end:p},S=he({x:t,y:e},this.getCenterPoint(a),$(-r));return S[i]>=x.start-s-ce&&S[i]<=x.end+s+ce}getCenterPoint(t){return fe(this,t)}draw(t){let{width:e,height:i,centerX:a,centerY:r,options:s}=this;t.save(),rt(t,this.getCenterPoint(),s.rotation),we(t,this.options),t.beginPath(),t.fillStyle=s.backgroundColor;let m=z(t,s);t.ellipse(a,r,i/2,e/2,A/2,0,2*A),t.fill(),m&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return qn(t,e)}};pe.id="ellipseAnnotation";pe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},oe.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};pe.defaultRoutes={borderColor:"color",backgroundColor:"color"};pe.descriptors={label:{_fallback:!0}};function Ma(n,t,e,i){let{width:a,height:r,centerX:s,centerY:m}=t,u=a/2,p=r/2;if(u<=0||p<=0)return!1;let h=$(e||0),x=Math.cos(h),S=Math.sin(h),C=Math.pow(x*(n.x-s)+S*(n.y-m),2),I=Math.pow(S*(n.x-s)-x*(n.y-m),2);return C/Math.pow(u+i,2)+I/Math.pow(p+i,2)<=1.0001}var De=class extends ne{inRange(t,e,i,a){let{x:r,y:s,x2:m,y2:u,width:p}=this.getProps(["x","y","x2","y2","width"],a),h=(this.options.borderWidth+this.options.hitTolerance)/2;return i!=="x"&&i!=="y"?vi({x:t,y:e},this.getCenterPoint(a),p/2,h):Fn(i==="y"?{start:s,end:u,value:e}:{start:r,end:m,value:t},h)}getCenterPoint(t){return fe(this,t)}draw(t){let e=this.options,i=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,we(t,e);let a=z(t,e);Di(t,this,this.centerX,this.centerY),a&&!at(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=i}resolveElementProperties(t,e){let i=Kn(t,e);return i.initProperties=Ie(t,i,e),i}};De.id="pointAnnotation";De.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};De.defaultRoutes={borderColor:"color",backgroundColor:"color"};var Ce=class extends ne{inRange(t,e,i,a){if(i!=="x"&&i!=="y")return this.options.radius>=.1&&this.elements.length>1&&Da(this.elements,t,e,a);let r=he({x:t,y:e},this.getCenterPoint(a),$(-this.options.rotation)),s=this.elements.map(p=>i==="y"?p.bY:p.bX),m=Math.min(...s),u=Math.max(...s);return r[i]>=m&&r[i]<=u}getCenterPoint(t){return fe(this,t)}draw(t){let{elements:e,options:i}=this;t.save(),t.beginPath(),t.fillStyle=i.backgroundColor,we(t,i);let a=z(t,i),r=!0;for(let s of e)r?(t.moveTo(s.x,s.y),r=!1):t.lineTo(s.x,s.y);t.closePath(),t.fill(),a&&(t.shadowColor=i.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){let i=Kn(t,e),{sides:a,rotation:r}=e,s=[],m=2*A/a,u=r*Ge;for(let p=0;p<a;p++,u+=m){let h=Ta(i,e,u);h.initProperties=Ie(t,i,e),s.push(h)}return i.elements=s,i}};Ce.id="polygonAnnotation";Ce.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ce.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Ta({centerX:n,centerY:t},{radius:e,borderWidth:i,hitTolerance:a},r){let s=(i+a)/2,m=Math.sin(r),u=Math.cos(r),p={x:n+m*e,y:t-u*e};return{type:"point",optionScope:"point",properties:{x:p.x,y:p.y,centerX:p.x,centerY:p.y,bX:n+m*(e+s),bY:t-u*(e+s)}}}function Da(n,t,e,i){let a=!1,r=n[n.length-1].getProps(["bX","bY"],i);for(let s of n){let m=s.getProps(["bX","bY"],i);m.bY>e!=r.bY>e&&t<(r.bX-m.bX)*(e-m.bY)/(r.bY-m.bY)+m.bX&&(a=!a),r=m}return a}var ae={box:oe,doughnutLabel:Te,ellipse:pe,label:ue,line:lt,point:De,polygon:Ce};Object.keys(ae).forEach(n=>{Kt.describe(`elements.${ae[n].id}`,{_fallback:"plugins.annotation.common"})});var Ca={update:Object.assign},Ia=kt.concat(nt),kn=(n,t)=>ee(t)?Dt(n,t):n,Tt=n=>n==="color"||n==="font";function Ft(n="line"){return ae[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function wa(n,t,e,i){let a=ka(n,e.animations,i),r=t.annotations,s=Oa(t.elements,r);for(let m=0;m<r.length;m++){let u=r[m],p=ei(s,m,u.type),h=u.setContext(Fa(n,p,s,u)),x=p.resolveElementProperties(n,h);x.skip=Ea(x),"elements"in x&&(Pa(p,x.elements,h,a),delete x.elements),N(p.x)||Object.assign(p,x),Object.assign(p,x.initProperties),x.options=ti(h),a.update(p,x)}}function Ea(n){return isNaN(n.x)||isNaN(n.y)}function ka(n,t,e){return e==="reset"||e==="none"||e==="resize"?Ca:new qt(n,t)}function Pa(n,t,e,i){let a=n.elements||(n.elements=[]);a.length=t.length;for(let r=0;r<t.length;r++){let s=t[r],m=s.properties,u=ei(a,r,s.type,s.initProperties),p=e[s.optionScope].override(s);m.options=ti(p),i.update(u,m)}}function ei(n,t,e,i){let a=ae[Ft(e)],r=n[t];return(!r||!(r instanceof a))&&(r=n[t]=new a,Object.assign(r,i)),r}function ti(n){let t=ae[Ft(n.type)],e={};e.id=n.id,e.type=n.type,e.drawTime=n.drawTime,Object.assign(e,Dt(n,t.defaults),Dt(n,t.defaultRoutes));for(let i of Ia)e[i]=n[i];return e}function Dt(n,t){let e={};for(let i of Object.keys(t)){let a=t[i],r=n[i];Tt(i)&&Z(r)?e[i]=r.map(s=>kn(s,a)):e[i]=kn(r,a)}return e}function Fa(n,t,e,i){return t.$context||(t.$context=Object.assign(Object.create(n.getContext()),{element:t,get elements(){return e.filter(a=>a&&a.options)},id:i.id,type:"annotation"}))}function Oa(n,t){let e=t.length,i=n.length;if(i<e){let a=e-i;n.splice(i,0,...new Array(a))}else i>e&&n.splice(e,i-e);return n}var Aa="3.1.0",ie=new Map,Pn=n=>n.type!=="doughnutLabel",Ra=kt.concat(nt),ni={id:"annotation",version:Aa,beforeRegister(){xi("chart.js","4.0",_e.version)},afterRegister(){_e.register(ae)},afterUnregister(){_e.unregister(ae)},beforeInit(n){ie.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,t,e){let i=ie.get(n),a=i.annotations=[],r=e.annotations;ee(r)?Object.keys(r).forEach(s=>{let m=r[s];ee(m)&&(m.id=s,a.push(m))}):Z(r)&&a.push(...r),Qi(a.filter(Pn),n.scales)},afterDataLimits(n,t){let e=ie.get(n);Ji(n,t.scale,e.annotations.filter(Pn).filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(n,t,e){let i=ie.get(n);Yi(n,i,e),wa(n,i,e,t.mode),i.visibleElements=i.elements.filter(a=>!a.skip&&a.options.display),qi(n,i,e)},beforeDatasetsDraw(n,t,e){Ve(n,"beforeDatasetsDraw",e.clip)},afterDatasetsDraw(n,t,e){Ve(n,"afterDatasetsDraw",e.clip)},beforeDatasetDraw(n,t,e){Ve(n,t.index,e.clip)},beforeDraw(n,t,e){Ve(n,"beforeDraw",e.clip)},afterDraw(n,t,e){Ve(n,"afterDraw",e.clip)},beforeEvent(n,t,e){let i=ie.get(n);Xi(i,t.event,e)&&(t.changed=!0)},afterDestroy(n){ie.delete(n)},getAnnotations(n){let t=ie.get(n);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(n,t,e){return Ct(n,t,e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!Ra.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,t)=>`elements.${ae[Ft(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Tt,_fallback:!0},_indexable:Tt}},additionalOptionScopes:[""]};function Ve(n,t,e){let{ctx:i,chartArea:a}=n,r=ie.get(n);e&&pt(i,a);let s=La(r.visibleElements,t).sort((m,u)=>m.element.options.z-u.element.options.z);for(let m of s)Va(i,a,r,m);e&&ht(i)}function La(n,t){let e=[];for(let i of n)if(i.options.drawTime===t&&e.push({element:i,main:!0}),i.elements&&i.elements.length)for(let a of i.elements)a.options.display&&a.options.drawTime===t&&e.push({element:a});return e}function Va(n,t,e,i){let a=i.element;i.main?(vn(e,a,"beforeDraw"),a.draw(n,t),vn(e,a,"afterDraw")):a.draw(n,t)}var Ee=class n{constructor(t){this.http=t}apiUrl=sn.apiUrl;getMatchesByDate(t){return this.http.get(`${this.apiUrl}/matches/summaries/by-date/${t}`)}getMatchesByDateRange(t,e){return this.http.get(`${this.apiUrl}/matches/filter-by-date-range?from=${t}&to=${e}`)}getDateRange(){return this.http.get(`${this.apiUrl}/matches/daterange`)}getAvailableDates(){return this.http.get(`${this.apiUrl}/matches/available-dates`)}getMatchDetails(t){return this.http.get(`${this.apiUrl}/match-details/${t}`)}getTrueSkillHistory(t,e){return console.log(`${this.apiUrl}/trueskill/history?player1TPId=${t}&player2TPId=${e}`),this.http.get(`${this.apiUrl}/trueskill/history?player1TPId=${t}&player2TPId=${e}`)}getMergedTrueSkillHistory(t,e){return console.log(`${this.apiUrl}/trueskill/history/merged?player1TPId=${t}&player2TPId=${e}`),this.http.get(`${this.apiUrl}/trueskill/history/merged?player1TPId=${t}&player2TPId=${e}`)}static \u0275fac=function(e){return new(e||n)(Rt(Ut))};static \u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ot=n=>["all",n],Wa=(n,t)=>({details:n,scope:"Sets",metrics:t}),Na=(n,t)=>({details:n,scope:"Games",metrics:t}),$a=()=>["all","year","month","week"],ai=n=>({details:n});function ja(n,t){if(n&1){let e=E();o(0,"li",15)(1,"a",16),D("click",function(){let a=M(e).$implicit,r=v();return T(r.setActiveTab(a))}),d(2),l()()}if(n&2){let e=t.$implicit,i=v();c(),Wt("active",i.activeTab===e),c(),y(" ",e," ")}}function Ha(n,t){if(n&1&&w(0,"span",24),n&2){let e=v(2).ngIf;U("fi fi-",e.tournamentEventCountryISO2.toLowerCase()," me-1 align-middle"),g("title",e.tournamentEventCountryFull),Ne("alt",e.tournamentEventCountryFull)}}function Ba(n,t){if(n&1&&(o(0,"span"),d(1),l()),n&2){let e=v(2).ngIf;c(),y(" \u2022 ",e.tournamentType,"")}}function Ga(n,t){if(n&1&&(o(0,"span"),d(1),l()),n&2){let e=v(2).ngIf;c(),y(" \u2022 ",e.tournamentLevel,"")}}function za(n,t){if(n&1&&w(0,"span",24),n&2){let e=v(2).ngIf;U("fi fi-",e.player1CountryISO2.toLowerCase()," me-1 align-middle"),g("title",e.player1CountryFull),Ne("alt",e.player1CountryFull)}}function Ya(n,t){if(n&1&&w(0,"span",24),n&2){let e=v(2).ngIf;U("fi fi-",e.player2CountryISO2.toLowerCase()," me-1 align-middle"),g("title",e.player2CountryFull),Ne("alt",e.player2CountryFull)}}function Xa(n,t){if(n&1&&(o(0,"span"),d(1),l()),n&2){let e=v(2).ngIf;c(),y(" \u2022 ",e.resultDetails,"")}}function Ua(n,t){if(n&1&&(o(0,"span"),d(1),l()),n&2){let e=t.ngIf,i=v(3);X("color",i.getWhoToBetColor()),c(),y(" ",e," ")}}function Ka(n,t){if(n&1&&(o(0,"div")(1,"p",19),_(2,Ha,1,5,"span",20),d(3),_(4,Ba,2,1,"span",14)(5,Ga,2,1,"span",14),o(6,"span",21),d(7,"\u2022"),l(),d(8),R(9,"date"),o(10,"span",21),d(11,"\u2022"),l(),d(12),l(),o(13,"p",19),_(14,za,1,5,"span",20),d(15),o(16,"span",21),d(17," \u2022 "),l(),_(18,Ya,1,5,"span",20),d(19),l(),o(20,"p",22)(21,"strong"),d(22),l(),_(23,Xa,2,1,"span",14),l(),o(24,"p",19)(25,"strong"),d(26,"Prize:"),l(),d(27),l(),o(28,"p",19)(29,"strong"),d(30,"Win Probability:"),l(),o(31,"span"),d(32),R(33,"number"),l(),d(34," \u2022 "),o(35,"span"),d(36),R(37,"number"),l()(),o(38,"p",19)(39,"strong"),d(40,"Odds:"),l(),o(41,"span"),d(42),l(),d(43," \u2022 "),o(44,"span"),d(45),l()(),o(46,"p",19)(47,"strong"),d(48,"Value Margin:"),l(),o(49,"span"),d(50),R(51,"number"),l(),d(52," \u2022 "),o(53,"span"),d(54),R(55,"number"),l()(),o(56,"strong"),d(57,"Who to Bet:"),l(),_(58,Ua,2,3,"span",23),l()),n&2){let e=v().ngIf,i=v();c(2),g("ngIf",e.tournamentEventCountryISO2),c(),$e(" ",e.tournamentEventName," (",e.tournamentEventCountryISO3,") "),c(),g("ngIf",e.tournamentType),c(),g("ngIf",e.tournamentLevel),c(3),y(" ",L(9,35,e.dateTime,"MM/dd/yyyy, HH:mm")," "),c(4),y(" ",e.surface," "),c(2),g("ngIf",e.player1CountryISO3),c(),$e(" (",e.player1CountryISO3,") ",e.player1Name," "),c(3),g("ngIf",e.player2CountryISO3),c(),$e(" (",e.player2CountryISO3,") ",e.player2Name," "),c(3),f(e.result||" \u2022 "),c(),g("ngIf",e.resultDetails),c(4),y(" ",e.prize+"$"||"-",""),c(4),X("color",i.getWpColor(e.winProbabilityPlayer1NN)),c(),y(" ",L(33,38,e.winProbabilityPlayer1NN,"1.2-2"),"% "),c(3),X("color",i.getWpColor(e.winProbabilityPlayer2NN)),c(),y(" ",L(37,41,e.winProbabilityPlayer2NN,"1.2-2"),"% "),c(5),X("color",i.getOddsColor(e.player1Odds,e.player2Odds)),c(),y(" ",e.player1Odds," "),c(2),X("color",i.getOddsColor(e.player2Odds,e.player1Odds)),c(),y(" ",e.player2Odds," "),c(4),X("color",i.getValueColor(e.valueMarginPlayer1)),c(),y(" ",L(51,44,e.valueMarginPlayer1,"1.2-2"),"% "),c(3),X("color",i.getValueColor(e.valueMarginPlayer2)),c(),y(" ",L(55,47,e.valueMarginPlayer2,"1.2-2"),"% "),c(4),g("ngIf",i.getWhoToBetName())}}function qa(n,t){if(n&1&&(o(0,"div"),w(1,"canvas",25),l()),n&2){let e=v(2);c(),g("datasets",e.lineChartData)("labels",e.lineChartLabels)("options",e.lineChartOptions)("legend",!0)("type","line")}}function Ja(n,t){if(n&1&&(o(0,"div"),w(1,"canvas",25),l()),n&2){let e=v(2);c(),g("datasets",e.winProbChartData)("labels",e.lineChartLabels)("options",e.winProbChartOptions)("legend",!0)("type","line")}}function Qa(n,t){if(n&1&&(K(0),o(1,"p"),d(2,"Indoors"),l(),o(3,"div",31)(4,"div",28),d(5),l(),o(6,"div",29),d(7,"TS Mean Match"),l(),o(8,"div",30),d(9),l()(),o(10,"div",31)(11,"div",28),d(12),l(),o(13,"div",29),d(14,"TS SD Match"),l(),o(15,"div",30),d(16),l()(),o(17,"div",31)(18,"div",28),d(19),l(),o(20,"div",29),d(21,"Win Probability Match"),l(),o(22,"div",30),d(23),l()(),o(24,"div",31)(25,"div",28),d(26),l(),o(27,"div",29),d(28,"TS Mean SetMatch"),l(),o(29,"div",30),d(30),l()(),o(31,"div",31)(32,"div",28),d(33),l(),o(34,"div",29),d(35,"TS SD SetMatch"),l(),o(36,"div",30),d(37),l()(),o(38,"div",31)(39,"div",28),d(40),l(),o(41,"div",29),d(42,"Win Probability SetMatch"),l(),o(43,"div",30),d(44),l()(),o(45,"div",31)(46,"div",28),d(47),l(),o(48,"div",29),d(49,"TS Mean GameSetMatch"),l(),o(50,"div",30),d(51),l()(),o(52,"div",31)(53,"div",28),d(54),l(),o(55,"div",29),d(56,"TS SD GameSetMatch"),l(),o(57,"div",30),d(58),l()(),o(59,"div",31)(60,"div",28),d(61),l(),o(62,"div",29),d(63,"Win Probability GameSetMatch"),l(),o(64,"div",30),d(65),l()(),q()),n&2){let e=v(2).ngIf;c(5),f(e.player1TrueSkillMeanOldMS1.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldMS1.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldMS1.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldMS1.toFixed(2)),c(3),y("",e.winProbabilityplayer1MS1.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2MS1.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldSMS1.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldSMS1.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldSMS1.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldSMS1.toFixed(2)),c(3),y("",e.winProbabilityplayer1SMS1.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2SMS1.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldGSMS1.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldGSMS1.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldGSMS1.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldGSMS1.toFixed(2)),c(3),y("",e.winProbabilityplayer1GSMS1.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2GSMS1.toFixed(2),"%")}}function Za(n,t){if(n&1&&(K(0),o(1,"p"),d(2,"Clay"),l(),o(3,"div",31)(4,"div",28),d(5),l(),o(6,"div",29),d(7,"TS Mean Match"),l(),o(8,"div",30),d(9),l()(),o(10,"div",31)(11,"div",28),d(12),l(),o(13,"div",29),d(14,"TS SD Match"),l(),o(15,"div",30),d(16),l()(),o(17,"div",31)(18,"div",28),d(19),l(),o(20,"div",29),d(21,"Win Probability Match"),l(),o(22,"div",30),d(23),l()(),o(24,"div",31)(25,"div",28),d(26),l(),o(27,"div",29),d(28,"TS Mean SetMatch"),l(),o(29,"div",30),d(30),l()(),o(31,"div",31)(32,"div",28),d(33),l(),o(34,"div",29),d(35,"TS SD SetMatch"),l(),o(36,"div",30),d(37),l()(),o(38,"div",31)(39,"div",28),d(40),l(),o(41,"div",29),d(42,"Win Probability SetMatch"),l(),o(43,"div",30),d(44),l()(),o(45,"div",31)(46,"div",28),d(47),l(),o(48,"div",29),d(49,"TS Mean GameSetMatch"),l(),o(50,"div",30),d(51),l()(),o(52,"div",31)(53,"div",28),d(54),l(),o(55,"div",29),d(56,"TS SD GameSetMatch"),l(),o(57,"div",30),d(58),l()(),o(59,"div",31)(60,"div",28),d(61),l(),o(62,"div",29),d(63,"Win Probability GameSetMatch"),l(),o(64,"div",30),d(65),l()(),q()),n&2){let e=v(2).ngIf;c(5),f(e.player1TrueSkillMeanOldMS2.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldMS2.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldMS2.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldMS2.toFixed(2)),c(3),y("",e.winProbabilityplayer1MS2.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2MS2.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldSMS2.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldSMS2.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldSMS2.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldSMS2.toFixed(2)),c(3),y("",e.winProbabilityplayer1SMS2.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2SMS2.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldGSMS2.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldGSMS2.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldGSMS2.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldGSMS2.toFixed(2)),c(3),y("",e.winProbabilityplayer1GSMS2.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2GSMS2.toFixed(2),"%")}}function er(n,t){if(n&1&&(K(0),o(1,"p"),d(2,"Grass"),l(),o(3,"div",31)(4,"div",28),d(5),l(),o(6,"div",29),d(7,"TS Mean Match"),l(),o(8,"div",30),d(9),l()(),o(10,"div",31)(11,"div",28),d(12),l(),o(13,"div",29),d(14,"TS SD Match"),l(),o(15,"div",30),d(16),l()(),o(17,"div",31)(18,"div",28),d(19),l(),o(20,"div",29),d(21,"Win Probability Match"),l(),o(22,"div",30),d(23),l()(),o(24,"div",31)(25,"div",28),d(26),l(),o(27,"div",29),d(28,"TS Mean SetMatch"),l(),o(29,"div",30),d(30),l()(),o(31,"div",31)(32,"div",28),d(33),l(),o(34,"div",29),d(35,"TS SD SetMatch"),l(),o(36,"div",30),d(37),l()(),o(38,"div",31)(39,"div",28),d(40),l(),o(41,"div",29),d(42,"Win Probability SetMatch"),l(),o(43,"div",30),d(44),l()(),o(45,"div",31)(46,"div",28),d(47),l(),o(48,"div",29),d(49,"TS Mean GameSetMatch"),l(),o(50,"div",30),d(51),l()(),o(52,"div",31)(53,"div",28),d(54),l(),o(55,"div",29),d(56,"TS SD GameSetMatch"),l(),o(57,"div",30),d(58),l()(),o(59,"div",31)(60,"div",28),d(61),l(),o(62,"div",29),d(63,"Win Probability GameSetMatch"),l(),o(64,"div",30),d(65),l()(),q()),n&2){let e=v(2).ngIf;c(5),f(e.player1TrueSkillMeanOldMS3.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldMS3.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldMS3.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldMS3.toFixed(2)),c(3),y("",e.winProbabilityplayer1MS3.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2MS3.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldSMS3.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldSMS3.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldSMS3.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldSMS3.toFixed(2)),c(3),y("",e.winProbabilityplayer1SMS3.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2SMS3.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldGSMS3.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldGSMS3.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldGSMS3.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldGSMS3.toFixed(2)),c(3),y("",e.winProbabilityplayer1GSMS3.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2GSMS3.toFixed(2),"%")}}function tr(n,t){if(n&1&&(K(0),o(1,"p"),d(2,"Hard"),l(),o(3,"div",31)(4,"div",28),d(5),l(),o(6,"div",29),d(7,"TS Mean Match"),l(),o(8,"div",30),d(9),l()(),o(10,"div",31)(11,"div",28),d(12),l(),o(13,"div",29),d(14,"TS SD Match"),l(),o(15,"div",30),d(16),l()(),o(17,"div",31)(18,"div",28),d(19),l(),o(20,"div",29),d(21,"Win Probability Match"),l(),o(22,"div",30),d(23),l()(),o(24,"div",31)(25,"div",28),d(26),l(),o(27,"div",29),d(28,"TS Mean SetMatch"),l(),o(29,"div",30),d(30),l()(),o(31,"div",31)(32,"div",28),d(33),l(),o(34,"div",29),d(35,"TS SD SetMatch"),l(),o(36,"div",30),d(37),l()(),o(38,"div",31)(39,"div",28),d(40),l(),o(41,"div",29),d(42,"Win Probability SetMatch"),l(),o(43,"div",30),d(44),l()(),o(45,"div",31)(46,"div",28),d(47),l(),o(48,"div",29),d(49,"TS Mean GameSetMatch"),l(),o(50,"div",30),d(51),l()(),o(52,"div",31)(53,"div",28),d(54),l(),o(55,"div",29),d(56,"TS SD GameSetMatch"),l(),o(57,"div",30),d(58),l()(),o(59,"div",31)(60,"div",28),d(61),l(),o(62,"div",29),d(63,"Win Probability GameSetMatch"),l(),o(64,"div",30),d(65),l()(),q()),n&2){let e=v(2).ngIf;c(5),f(e.player1TrueSkillMeanOldMS4.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldMS4.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldMS4.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldMS4.toFixed(2)),c(3),y("",e.winProbabilityplayer1MS4.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2MS4.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldSMS4.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldSMS4.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldSMS4.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldSMS4.toFixed(2)),c(3),y("",e.winProbabilityplayer1SMS4.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2SMS4.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldGSMS4.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldGSMS4.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldGSMS4.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldGSMS4.toFixed(2)),c(3),y("",e.winProbabilityplayer1GSMS4.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2GSMS4.toFixed(2),"%")}}function nr(n,t){if(n&1&&(o(0,"div",26)(1,"div",27)(2,"div",28),d(3),l(),o(4,"div",29),d(5,"Metric"),l(),o(6,"div",30),d(7),l()(),o(8,"div",31)(9,"div",28),d(10),l(),o(11,"div",29),d(12,"TS Mean Match"),l(),o(13,"div",30),d(14),l()(),o(15,"div",31)(16,"div",28),d(17),l(),o(18,"div",29),d(19,"TS SD Match"),l(),o(20,"div",30),d(21),l()(),o(22,"div",31)(23,"div",28),d(24),l(),o(25,"div",29),d(26,"Win Probability Match"),l(),o(27,"div",30),d(28),l()(),o(29,"div",31)(30,"div",28),d(31),l(),o(32,"div",29),d(33,"TS Mean SetMatch"),l(),o(34,"div",30),d(35),l()(),o(36,"div",31)(37,"div",28),d(38),l(),o(39,"div",29),d(40,"TS SD SetMatch"),l(),o(41,"div",30),d(42),l()(),o(43,"div",31)(44,"div",28),d(45),l(),o(46,"div",29),d(47,"Win Probability SetMatch"),l(),o(48,"div",30),d(49),l()(),o(50,"div",31)(51,"div",28),d(52),l(),o(53,"div",29),d(54,"TS Mean GameSetMatch"),l(),o(55,"div",30),d(56),l()(),o(57,"div",31)(58,"div",28),d(59),l(),o(60,"div",29),d(61,"TS SD GameSetMatch"),l(),o(62,"div",30),d(63),l()(),o(64,"div",31)(65,"div",28),d(66),l(),o(67,"div",29),d(68,"Win Probability GameSetMatch"),l(),o(69,"div",30),d(70),l()(),w(71,"hr",32),K(72,33),_(73,Qa,66,18,"ng-container",34)(74,Za,66,18,"ng-container",34)(75,er,66,18,"ng-container",34)(76,tr,66,18,"ng-container",34),q(),l()),n&2){let e=v().ngIf;c(3),f(e.player1Name),c(4),f(e.player2Name),c(3),f(e.player1TrueSkillMeanOldM.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldM.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldM.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldM.toFixed(2)),c(3),y("",e.winProbabilityplayer1M.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2M.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldSM.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldSM.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldSM.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldSM.toFixed(2)),c(3),y("",e.winProbabilityplayer1SM.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2SM.toFixed(2),"%"),c(3),f(e.player1TrueSkillMeanOldGSM.toFixed(2)),c(4),f(e.player2TrueSkillMeanOldGSM.toFixed(2)),c(3),f(e.player1TrueSkillStandardDeviationOldGSM.toFixed(2)),c(4),f(e.player2TrueSkillStandardDeviationOldGSM.toFixed(2)),c(3),y("",e.winProbabilityplayer1GSM.toFixed(2),"%"),c(4),y("",e.winProbabilityplayer2GSM.toFixed(2),"%"),c(2),g("ngSwitch",e.surfaceId),c(),g("ngSwitchCase",1),c(),g("ngSwitchCase",2),c(),g("ngSwitchCase",3),c(),g("ngSwitchCase",4)}}function ir(n,t){if(n&1){let e=E();o(0,"div",41)(1,"input",42),G("ngModelChange",function(a){M(e);let r=v(3);return B(r.performanceSurface,a)||(r.performanceSurface=a),T(a)}),l(),o(2,"label",43),d(3),l()()}if(n&2){let e=t.$implicit,i=v(3);c(),g("value",e),H("ngModel",i.performanceSurface),g("id","surface-"+e),c(),g("for","surface-"+e),c(),y(" ",e==="all"?"All Surfaces":"S"+e," ")}}function ar(n,t){if(n&1){let e=E();o(0,"div",41)(1,"input",44),D("change",function(){let a=M(e).$implicit,r=v(3);return T(r.setPerformanceRange("Matches",a))}),l(),o(2,"label",45),d(3),l()()}if(n&2){let e=t.$implicit,i=v(3);c(),g("value",e)("checked",i.getPerformanceRange("Matches")===e)("id","range-Matches-"+e),c(),g("for","range-Matches-"+e),c(),y(" ",e==="all"?"All Matches":"Last "+e," ")}}function rr(n,t){n&1&&(o(0,"span"),d(1,"%"),l())}function or(n,t){n&1&&(o(0,"span"),d(1,"%"),l())}function lr(n,t){if(n&1&&(o(0,"div",31)(1,"div",28),d(2),_(3,rr,2,0,"span",14),l(),o(4,"div",29),d(5),l(),o(6,"div",30),d(7),_(8,or,2,0,"span",14),l()()),n&2){let e=t.$implicit,i=v().ngIf,a=v(2);c(2),y(" ",a.getPerformanceValue(i,1,e),""),c(),g("ngIf",e==="WinRatio"),c(2),f(e),c(2),y(" ",a.getPerformanceValue(i,2,e),""),c(),g("ngIf",e==="WinRatio")}}function sr(n,t){if(n&1&&(o(0,"div",35)(1,"div",36)(2,"div",28),d(3),l(),o(4,"div",29),d(5,"Metric"),l(),o(6,"div",30),d(7),l()(),o(8,"div",37),_(9,ir,4,5,"div",38),l(),o(10,"div",39),_(11,ar,4,5,"div",38),l(),K(12,33),_(13,lr,9,5,"div",40),q(),l()),n&2){let e=t.ngIf,i=v(2);c(3),f(e.player1Name),c(4),f(e.player2Name),c(2),g("ngForOf",ge(6,Ot,i.match==null||i.match.surfaceId==null?null:i.match.surfaceId.toString())),c(2),g("ngForOf",i.rangeOptions),c(),g("ngSwitch",i.performanceRanges),c(),g("ngForOf",i.metrics)}}function dr(n,t){n&1&&Pe(0)}function cr(n,t){if(n&1&&(o(0,"div"),_(1,dr,1,0,"ng-container",46),l()),n&2){let e=v(2),i=j(13);c(),g("ngTemplateOutlet",i)("ngTemplateOutletContext",mt(2,Wa,e.summaryData,e.metrics))}}function mr(n,t){n&1&&Pe(0)}function ur(n,t){if(n&1&&(o(0,"div"),_(1,mr,1,0,"ng-container",46),l()),n&2){let e=v(2),i=j(13);c(),g("ngTemplateOutlet",i)("ngTemplateOutletContext",mt(2,Na,e.summaryData,e.metrics))}}function pr(n,t){if(n&1&&(K(0),_(1,Ka,59,50,"div",14)(2,qa,2,5,"div",14)(3,Ja,2,5,"div",14)(4,nr,77,25,"div",17)(5,sr,14,8,"div",18)(6,cr,2,5,"div",14)(7,ur,2,5,"div",14),q()),n&2){let e=v();c(),g("ngIf",e.activeTab==="Summary"),c(),g("ngIf",e.activeTab==="TS Breakdown"&&e.lineChartData.length&&e.lineChartLabels.length),c(),g("ngIf",e.activeTab==="Win Probability Breakdown"&&(e.winProbChartData==null||e.winProbChartData[0]==null||e.winProbChartData[0].data==null?null:e.winProbChartData[0].data.length)),c(),g("ngIf",e.activeTab==="TrueSkill"),c(),g("ngIf",e.activeTab==="Performance"&&e.summaryData),c(),g("ngIf",e.activeTab==="Set Performance"&&e.summaryData),c(),g("ngIf",e.activeTab==="Game Performance"&&e.summaryData)}}function hr(n,t){if(n&1){let e=E();o(0,"div",41)(1,"input",47),G("ngModelChange",function(a){M(e);let r=v(2);return B(r.performanceSurface,a)||(r.performanceSurface=a),T(a)}),l(),o(2,"label",43),d(3),l()()}if(n&2){let e=t.$implicit,i=v().scope,a=v();c(),Fe("name","performanceSurface_",i,""),g("value",e),H("ngModel",a.performanceSurface),g("id","surface-"+i+"-"+e),c(),g("for","surface-"+i+"-"+e),c(),y(" ",e==="all"?"All Surfaces":"S"+e," ")}}function fr(n,t){if(n&1){let e=E();o(0,"div",41)(1,"input",48),D("change",function(){let a=M(e).$implicit,r=v().scope,s=v();return T(s.setPerformanceRange(r,a))}),l(),o(2,"label",45),d(3),l()()}if(n&2){let e=t.$implicit,i=v().scope,a=v();c(),Fe("name","performanceRange_",i,""),g("value",e)("checked",a.getPerformanceRange(i)===e)("id","range-"+i+"-"+e),c(),g("for","range-"+i+"-"+e),c(),y(" ",e==="all"?"All Matches":"Last "+e," ")}}function gr(n,t){n&1&&(o(0,"span"),d(1,"%"),l())}function vr(n,t){n&1&&(o(0,"span"),d(1,"%"),l())}function xr(n,t){if(n&1&&(o(0,"div",31)(1,"div",28),d(2),_(3,gr,2,0,"span",14),l(),o(4,"div",29),d(5),l(),o(6,"div",30),d(7),_(8,vr,2,0,"span",14),l()()),n&2){let e=t.$implicit,i=v(),a=i.details,r=i.scope,s=v();c(2),y(" ",s.getPerformanceValue(a,1,e,r)," "),c(),g("ngIf",e==="WinRatio"),c(2),f(e),c(2),y(" ",s.getPerformanceValue(a,2,e,r)," "),c(),g("ngIf",e==="WinRatio")}}function yr(n,t){if(n&1&&(o(0,"div",36)(1,"div",28),d(2),l(),o(3,"div",29),d(4,"Metric"),l(),o(5,"div",30),d(6),l()(),o(7,"div",37),_(8,hr,4,7,"div",38),l(),o(9,"div",39),_(10,fr,4,7,"div",38),l(),_(11,xr,9,5,"div",40)),n&2){let e=t.details,i=t.metrics,a=v();c(2),f(e.player1Name),c(4),f(e.player2Name),c(2),g("ngForOf",ge(5,Ot,a.match==null||a.match.surfaceId==null?null:a.match.surfaceId.toString())),c(2),g("ngForOf",Ht(7,$a)),c(),g("ngForOf",i)}}function Sr(n,t){n&1&&Pe(0)}function _r(n,t){if(n&1&&(o(0,"div"),_(1,Sr,1,0,"ng-container",46),l()),n&2){let e=t.ngIf;v();let i=j(16);c(),g("ngTemplateOutlet",i)("ngTemplateOutletContext",ge(2,ai,e))}}function br(n,t){if(n&1){let e=E();o(0,"div",41)(1,"input",50),D("change",function(){let a=M(e).$implicit,r=v(2);return T(r.setPerformanceRange("Matches",a))}),l(),o(2,"label",45),d(3),l()()}if(n&2){let e=t.$implicit,i=v(2);c(),g("value",e)("checked",i.getPerformanceRange("Matches")===e)("id","expectationRange-"+e),c(),g("for","expectationRange-"+e),c(),y(" ",e==="all"?"All Matches":"Last "+e," ")}}function Mr(n,t){if(n&1&&(o(0,"div",36)(1,"div",28),d(2),l(),o(3,"div",29),d(4,"Metric"),l(),o(5,"div",30),d(6),l()(),o(7,"div",39),_(8,br,4,5,"div",38),l(),o(9,"div",31)(10,"div",28),d(11),l(),o(12,"div",49),d(13,"Wins as Favourite"),l(),o(14,"div",30),d(15),l()(),o(16,"div",31)(17,"div",28),d(18),l(),o(19,"div",49),d(20,"Wins as Underdog"),l(),o(21,"div",30),d(22),l()(),o(23,"div",31)(24,"div",28),d(25),l(),o(26,"div",49),d(27,"Losses as Favourite"),l(),o(28,"div",30),d(29),l()(),o(30,"div",31)(31,"div",28),d(32),l(),o(33,"div",49),d(34,"Losses as Underdog"),l(),o(35,"div",30),d(36),l()(),o(37,"div",31)(38,"div",28),d(39),l(),o(40,"div",49),d(41,"Wins as Favourite"),l(),o(42,"div",30),d(43),l()(),o(44,"div",31)(45,"div",28),d(46),l(),o(47,"div",49),d(48,"Wins as Underdog"),l(),o(49,"div",30),d(50),l()(),o(51,"div",31)(52,"div",28),d(53),l(),o(54,"div",49),d(55,"Losses as Favourite"),l(),o(56,"div",30),d(57),l()(),o(58,"div",31)(59,"div",28),d(60),l(),o(61,"div",49),d(62,"Losses as Underdog"),l(),o(63,"div",30),d(64),l()()),n&2){let e=t.details,i=v();c(2),f(e.player1Name),c(4),f(e.player2Name),c(2),g("ngForOf",i.rangeOptions),c(3),f(i.getValue(e,"TotalWinsAsFavourite")),c(4),f(i.getValue(e,"TotalWinsAsFavourite",2)),c(3),f(i.getValue(e,"TotalWinsAsUnderdog")),c(4),f(i.getValue(e,"TotalWinsAsUnderdog",2)),c(3),f(i.getValue(e,"TotalLossesAsFavourite")),c(4),f(i.getValue(e,"TotalLossesAsFavourite",2)),c(3),f(i.getValue(e,"TotalLossesAsUnderdog")),c(4),f(i.getValue(e,"TotalLossesAsUnderdog",2)),c(3),f(i.formatPercent(i.getValue(e,"TotalWinsAsFavourite")/(i.getValue(e,"TotalWinsAsFavourite")+i.getValue(e,"TotalLossesAsFavourite")))),c(4),f(i.formatPercent(i.getValue(e,"TotalWinsAsFavourite",2)/(i.getValue(e,"TotalWinsAsFavourite",2)+i.getValue(e,"TotalLossesAsFavourite",2)))),c(3),f(i.formatPercent(i.getValue(e,"TotalWinsAsUnderdog")/(i.getValue(e,"TotalWinsAsUnderdog")+i.getValue(e,"TotalLossesAsUnderdog")))),c(4),f(i.formatPercent(i.getValue(e,"TotalWinsAsUnderdog",2)/(i.getValue(e,"TotalWinsAsUnderdog",2)+i.getValue(e,"TotalLossesAsUnderdog",2)))),c(3),f(i.formatPercent(i.getValue(e,"TotalLossesAsFavourite")/(i.getValue(e,"TotalWinsAsFavourite")+i.getValue(e,"TotalLossesAsFavourite")))),c(4),f(i.formatPercent(i.getValue(e,"TotalLossesAsFavourite",2)/(i.getValue(e,"TotalWinsAsFavourite",2)+i.getValue(e,"TotalLossesAsFavourite",2)))),c(3),f(i.formatPercent(i.getValue(e,"TotalLossesAsUnderdog")/(i.getValue(e,"TotalWinsAsUnderdog")+i.getValue(e,"TotalLossesAsUnderdog")))),c(4),f(i.formatPercent(i.getValue(e,"TotalLossesAsUnderdog",2)/(i.getValue(e,"TotalWinsAsUnderdog",2)+i.getValue(e,"TotalLossesAsUnderdog",2))))}}function Tr(n,t){n&1&&Pe(0)}function Dr(n,t){if(n&1&&(o(0,"div"),_(1,Tr,1,0,"ng-container",46),l()),n&2){let e=t.ngIf;v();let i=j(19);c(),g("ngTemplateOutlet",i)("ngTemplateOutletContext",ge(2,ai,e))}}function Cr(n,t){if(n&1){let e=E();o(0,"div",41)(1,"input",51),G("ngModelChange",function(a){M(e);let r=v(2);return B(r.performanceSurface,a)||(r.performanceSurface=a),T(a)}),l(),o(2,"label",43),d(3),l()()}if(n&2){let e=t.$implicit,i=v(2);c(),g("value",e),H("ngModel",i.performanceSurface),g("id","streak-surface-"+e),c(),g("for","streak-surface-"+e),c(),y(" ",e==="all"?"All Surfaces":"S"+e," ")}}function Ir(n,t){if(n&1&&(o(0,"div",36)(1,"div",28),d(2),l(),o(3,"div",29),d(4,"Metric"),l(),o(5,"div",30),d(6),l()(),o(7,"div",37),_(8,Cr,4,5,"div",38),l(),o(9,"div",31)(10,"div",28),d(11),l(),o(12,"div",49),d(13,"Current Streak"),l(),o(14,"div",30),d(15),l()(),o(16,"div",31)(17,"div",28),d(18),l(),o(19,"div",49),d(20,"Days Since Win"),l(),o(21,"div",30),d(22),l()(),o(23,"div",31)(24,"div",28),d(25),l(),o(26,"div",49),d(27,"Days Since Loss"),l(),o(28,"div",30),d(29),l()()),n&2){let e=t.details,i=v();c(2),f(e.player1Name),c(4),f(e.player2Name),c(2),g("ngForOf",ge(9,Ot,i.match==null||i.match.surfaceId==null?null:i.match.surfaceId.toString())),c(3),f(i.getStreak(e,"Streak")),c(4),f(i.getStreak(e,"Streak",2)),c(3),f(i.getStreak(e,"DaysSinceLastWin")),c(4),f(i.getStreak(e,"DaysSinceLastWin",2)),c(3),f(i.getStreak(e,"DaysSinceLastLoss")),c(4),f(i.getStreak(e,"DaysSinceLastLoss",2))}}function wr(n,t){if(n&1&&(o(0,"div",31)(1,"div",28),d(2),R(3,"number"),l(),o(4,"div",29),d(5),l(),o(6,"div",30),d(7),R(8,"number"),l()()),n&2){let e=t.$implicit,i=v().ngIf,a=v();c(2),y(" ",e==="WinProbability"?L(3,3,a.getH2HValue(i,e,1),"1.0-2")+"%":a.getH2HValue(i,e,1)," "),c(3),y(" ",a.metricLabelMap[e]," "),c(2),y(" ",e==="WinProbability"?L(8,6,a.getH2HValue(i,e,2),"1.0-2")+"%":a.getH2HValue(i,e,2)," ")}}function Er(n,t){if(n&1){let e=E();o(0,"div")(1,"div",52)(2,"div",53)(3,"label",54),d(4,"Granularity:"),l(),o(5,"select",55),G("ngModelChange",function(a){M(e);let r=v();return B(r.h2hGranularity,a)||(r.h2hGranularity=a),T(a)}),o(6,"option",56),d(7,"Matches"),l(),o(8,"option",57),d(9,"Sets"),l(),o(10,"option",58),d(11,"Games"),l()()()(),o(12,"div",36)(13,"div",28),d(14),l(),o(15,"div",29),d(16,"Metric"),l(),o(17,"div",30),d(18),l()(),_(19,wr,9,9,"div",40),w(20,"hr",32),o(21,"div",31)(22,"div",28),d(23),l(),o(24,"div",29),d(25,"H2H Wins"),l(),o(26,"div",30),d(27),l()()()}if(n&2){let e=t.ngIf,i=v();c(5),H("ngModel",i.h2hGranularity),c(9),f(e.player1Name),c(4),f(e.player2Name),c(),g("ngForOf",i.h2hMetrics),c(4),f(i.getH2HWins(1)),c(4),f(i.getH2HWins(2))}}function kr(n,t){n&1&&(o(0,"p"),d(1,"Loading match details..."),l())}function Pr(n,t){n&1&&(o(0,"p"),d(1,"Failed to load match details."),l())}function Fr(n,t){if(n&1&&_(0,kr,2,0,"p",14)(1,Pr,2,0,"p",14),n&2){let e=v();g("ngIf",e.loadingDetails),c(),g("ngIf",!e.loadingDetails&&!e.summaryData)}}_e.register(...Qt,ni);var st=class n{constructor(t,e){this.matchService=t;this.cdr=e}match;closed=new W;performanceSurface="all";activeTab="Summary";tabs=["Summary","TS Breakdown","Win Probability Breakdown","TrueSkill","Performance","Set Performance","Game Performance","Expectation Performance","Streak Info","H2H"];metrics=["Matches","Wins","Losses","WinRatio"];rangeOptions=["all","year","month","week"];trueSkillHistoryPlayer1=[];trueSkillHistoryPlayer2=[];performanceRanges={Matches:"all",Sets:"all",Games:"all"};summaryData=null;loadingDetails=!0;errorLoading=!1;performanceMetrics;h2hGranularity="M";h2hMetrics=["TrueSkillMean","TrueSkillStandardDeviation","TrueSkillMeanOld","TrueSkillStandardDeviationOld","WinProbability"];metricLabelMap={TrueSkillMean:"TrueSkill (Current)",TrueSkillStandardDeviation:"SD (Current)",TrueSkillMeanOld:"TrueSkill (Previous)",TrueSkillStandardDeviationOld:"SD (Previous)",WinProbability:"Win Probability"};lineChartData=[{data:[],label:"Player 1",fill:!1},{data:[],label:"Player 2",fill:!1}];lineChartLabels=[];lineChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0,mode:"index",intersect:!1}},interaction:{mode:"nearest",axis:"x",intersect:!1},scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"TrueSkill Mean"},suggestedMin:15,suggestedMax:35}}};winProbChartData=[{data:[],label:"Player 1 Win Probability",borderColor:"green",fill:!1},{data:[],label:"Player 2 Win Probability",borderColor:"orange",fill:!1}];winProbChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0,mode:"index",intersect:!1}},interaction:{mode:"nearest",axis:"x",intersect:!1},scales:{y:{title:{display:!0,text:"Win Probability"},min:0,max:100},x:{title:{display:!0,text:"Date"}}}};ngOnInit(){this.match?._id&&this.matchService.getMatchDetails(this.match._id).subscribe({next:t=>{this.summaryData=t,this.performanceSurface=this.summaryData?.surfaceId?.toString()||"all",this.loadingDetails=!1;let e=this.summaryData.player1TPId,i=this.summaryData.player2TPId;!e||!i||this.matchService.getMergedTrueSkillHistory(e,i).subscribe({next:a=>{if(!Array.isArray(a)||a.length===0){console.warn("\u26A0\uFE0F Nema validnih TS podataka za prikaz.");return}this.lineChartLabels=a.map(b=>new Date(b.dateTime).toLocaleDateString());let r=new Date(this.match.dateTime).toLocaleDateString(),s=this.calculateLinearTrend(a.map(b=>b.player1?.mean??25)),m=this.calculateLinearTrend(a.map(b=>b.player2?.mean??25)),u=a.map(b=>{let F={mean:b.player1?.mean??25,sd:b.player1?.sd??8.333},V={mean:b.player2?.mean??25,sd:b.player2?.sd??8.333};return this.getWinProbability(F.mean,F.sd,V.mean,V.sd)}),p=this.calculateLinearTrend(u).map(b=>Math.round(b*100)/100),h=p.map(b=>Math.round((100-b)*100)/100),x={type:"line",xMin:r,xMax:r,borderColor:"rgba(128,128,128,0.7)",borderWidth:2,borderDash:[2,2],label:{display:!0,content:"Match Date",position:"start",backgroundColor:"#fff",color:"#333",font:{style:"italic",weight:"normal"},padding:0}};this.lineChartOptions.plugins.annotation=this.winProbChartOptions.plugins.annotation={annotations:{matchLine:x}},this.lineChartData=[{data:a.map(b=>b.player1?.mean??25),label:this.summaryData?.player1Name||"Player 1",borderColor:"rgba(255, 0, 0, 1)",backgroundColor:"rgba(255, 0, 0, 0.1)",borderWidth:2,tension:.6,fill:!1,pointRadius:0,pointHoverRadius:0},{data:a.map(b=>b.player2?.mean??25),label:this.summaryData?.player2Name||"Player 2",borderColor:"rgba(0, 0, 255, 1)",backgroundColor:"rgba(0, 0, 255, 0.1)",borderWidth:2,tension:.6,fill:!1,pointRadius:0,pointHoverRadius:0},{data:s,label:`${this.summaryData?.player1Name||"Player 1"} Trend`,borderColor:"rgba(0,0,0,0.5)",borderDash:[2,2],borderWidth:2.5,fill:!1,pointRadius:0,pointHoverRadius:0},{data:m,label:`${this.summaryData?.player2Name||"Player 2"} Trend`,borderColor:"rgba(0,0,0,0.5)",borderDash:[2,2],borderWidth:2.5,fill:!1,pointRadius:0,pointHoverRadius:0}],this.winProbChartData=[{data:u,label:`${this.summaryData?.player1Name||"Player 1"} Win Probability`,borderColor:"rgba(255, 0, 0, 1)",backgroundColor:"rgba(255, 0, 0, 0.1)",tension:.4,pointRadius:0,fill:!1},{data:u.map(b=>100-b),label:`${this.summaryData?.player2Name||"Player 2"} Win Probability`,borderColor:"rgba(0, 0, 255, 1)",backgroundColor:"rgba(0, 0, 255, 0.1)",tension:.4,pointRadius:0,fill:!1},{data:p,label:`${this.summaryData?.player1Name||"Player 1"} WP Trend`,borderColor:"rgba(0,0,0,0.5)",borderDash:[2,2],borderWidth:2.5,fill:!1,pointRadius:0,pointHoverRadius:0},{data:h,label:`${this.summaryData?.player2Name||"Player 2"} WP Trend`,borderColor:"rgba(0,0,0,0.5)",borderDash:[2,2],borderWidth:2.5,fill:!1,pointRadius:0,pointHoverRadius:0}];let S=[...a.map(b=>b.player1?.mean??25),...a.map(b=>b.player2?.mean??25)];this.lineChartOptions.scales.y.min=Math.floor(Math.min(...S)),this.lineChartOptions.scales.y.max=Math.ceil(Math.max(...S));let C=[...u,...u.map(b=>100-b),...p,...h],I=Math.min(...C),O=Math.max(...C),P=Math.max(0,Math.floor(I)-1),k=Math.min(100,Math.ceil(O)+0);if(k-P<10){let b=(k+P)/2;P=Math.max(0,Math.floor(b-0)),k=Math.min(100,Math.ceil(b+0))}this.winProbChartOptions.scales.y.min=P,this.winProbChartOptions.scales.y.max=k,this.cdr.detectChanges()},error:a=>console.error("\u274C Gre\u0161ka kod dohva\u0107anja merged TS:",a)})},error:()=>{this.errorLoading=!0,this.loadingDetails=!1}})}setActiveTab(t){this.activeTab=t}close(){this.closed.emit()}formatOdds(t){return t==null||isNaN(t)?"-":t.toFixed(2)}formatPercent(t){return t==null||isNaN(t)?"-":(t*100).toFixed(2)+"%"}getRangeLabel(t){return t==="all"?"All Matches":`Last ${t}`}setPerformanceRange(t,e){["all","year","month","week"].includes(e)?this.performanceRanges[t]=e:console.warn("[setPerformanceRange] Invalid range value:",e)}getPerformanceRange(t){return this.performanceRanges[t]}getPerformanceValue(t,e,i,a="Matches"){let r={all:"Total",year:"LastYear",month:"LastMonth",week:"LastWeek"},s=this.performanceRanges[a],m=r[s],u=this.performanceSurface!=="all"?`S${this.performanceSurface}`:"",p=`player${e}`,h,x=t;if(i==="WinRatio"){let I=a==="Matches"?`${p}Wins${m}${u}`:`${p}Wins${a}${m}${u}`,O=a==="Matches"?`${p}Matches${m}${u}`:`${p}${a}${m}${u}`,P=x[I],k=x[O],b=typeof P=="string"?parseInt(P.replace(/,/g,""),10):P??0,F=typeof k=="string"?parseInt(k.replace(/,/g,""),10):k??0;return F>0?Math.round(b/F*1e4)/100:0}a==="Matches"?h=`${p}${i}${m}${u}`:h=i==="Matches"?`${p}${a}${m}${u}`:`${p}${i}${a}${m}${u}`;let S=x[h];return typeof S=="string"?parseInt(S.replace(/,/g,""),10):S??0}getValue(t,e,i=1){let r={all:"",year:"LastYear",month:"LastMonth",week:"LastWeek"}[this.getPerformanceRange("Matches")],s=`player${i}${e}${r}`,u=t[s];return typeof u=="string"?parseFloat(u.replace(/,/g,"")):u??0}getStreak(t,e,i=1){let a=`player${i}${e}`,r=this.performanceSurface!=="all"?`S${this.performanceSurface}`:"",s=a+r,u=t[s];return typeof u=="string"?parseFloat(u.replace(/,/g,"")):u??0}getH2HValue(t,e,i){let a=this.performanceSurface!=="all"?"S"+this.performanceSurface:"",r=this.h2hGranularity,s=e==="WinProbability"?`winProbabilityplayer${i}H2H${r}${a}`:`player${i}H2H${e}${r}${a}`,u=t[s];return typeof u=="string"?parseFloat(u.replace(/,/g,"")):u??0}getH2HWins(t){let e=this.summaryData,i=`player${t}H2H`,a=e[i];return typeof a=="string"?parseFloat(a.replace(/,/g,"")):a??0}calculateLinearTrend(t){let e=t.length,i=[...Array(e).keys()],a=i.reduce((h,x)=>h+x,0),r=t.reduce((h,x)=>h+x,0),s=i.reduce((h,x,S)=>h+x*t[S],0),m=i.reduce((h,x)=>h+x*x,0),u=(e*s-a*r)/(e*m-a*a),p=(r-u*a)/e;return i.map(h=>u*h+p)}normalCDF(t){let e=.254829592,i=-.284496736,a=1.421413741,r=-1.453152027,s=1.061405429,m=.3275911,u=t<0?-1:1;t=Math.abs(t)/Math.sqrt(2);let p=1/(1+m*t),h=1-((((s*p+r)*p+a)*p+i)*p+e)*p*Math.exp(-t*t);return .5*(1+u*h)}getWinProbability(t,e,i,a){let s=Math.sqrt(34.722777779999994+e*e+a*a),m=t-i,u=this.normalCDF(m/s);return Math.round(u*1e4)/100}getWpColor(t){let i=Math.max(0,Math.min(100,t??50));if(i<50){let r=i/50;return this.mix("#e53935","#222222",r)}let a=(i-50)/50;return this.mix("#222222","#43a047",a)}hexToRgb(t){t=t.replace("#",""),t.length===3&&(t=t.split("").map(i=>i+i).join(""));let e=parseInt(t,16);return[e>>16&255,e>>8&255,e&255]}rgbToHex(t,e,i){let a=r=>r.toString(16).padStart(2,"0");return`#${a(t)}${a(e)}${a(i)}`}mix(t,e,i){let[a,r,s]=this.hexToRgb(t),[m,u,p]=this.hexToRgb(e),h=Math.round(a+(m-a)*i),x=Math.round(r+(u-r)*i),S=Math.round(s+(p-s)*i);return this.rgbToHex(h,x,S)}getOddsColor(t,e){if(!t||!e)return"#222222";let i=1/t,a=1/e,r=i+a,s=i/r*100;return this.getWpColor(s)}getValueColor(t){let e=t??0,i=Math.min(Math.abs(e),20)/20;return e>=0?this.mix("#222222","#43a047",i):this.mix("#222222","#e53935",i)}getWhoToBetName(){let t=this.summaryData;return t?.who2Bet?(t.who2Bet===1?t.player1Name:t.player2Name)??null:null}getWhoToBetColor(){let t=this.summaryData;return t?.who2Bet===1?this.getValueColor(t.valueMarginPlayer1):t?.who2Bet===2?this.getValueColor(t.valueMarginPlayer2):"#222222"}static \u0275fac=function(e){return new(e||n)(le(Ee),le(Bt))};static \u0275cmp=Y({type:n,selectors:[["app-match-modal"]],inputs:{match:"match"},outputs:{closed:"closed"},decls:23,vars:6,consts:[["performanceBlock",""],["expectationPerformanceBlock",""],["streakInfoBlock",""],["loadingOrError",""],[1,"match-modal-backdrop"],[1,"match-modal-content"],[1,"modal-header","justify-content-between","align-items-center"],[1,"modal-title"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"tab-nav","mb-3"],[1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForOf"],[1,"modal-body","text-center"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link",3,"click"],["class","trueskill-tab px-2 mt-3",4,"ngIf"],["class","performance-tab px-2 mt-3",4,"ngIf"],[1,"mb-1"],[3,"class","title",4,"ngIf"],[1,"mx-1"],[1,"mb-1","text-muted"],[3,"color",4,"ngIf"],[3,"title"],["baseChart","",3,"datasets","labels","options","legend","type"],[1,"trueskill-tab","px-2","mt-3"],[1,"row","text-center","fw-bold","mb-2"],[1,"col-4","text-end"],[1,"col-4","text-center"],[1,"col-4","text-start"],[1,"row","text-center","mb-1"],[1,"my-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"performance-tab","px-2","mt-3"],[1,"row","text-center","fw-bold","mb-3"],[1,"mb-2","text-center"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],[1,"mb-3","text-center"],["class","row text-center mb-1",4,"ngFor","ngForOf"],[1,"form-check","form-check-inline"],["type","radio","name","performanceSurface",1,"form-check-input",3,"ngModelChange","value","ngModel","id"],[1,"form-check-label",3,"for"],["type","radio","name","performanceRange_Main",1,"form-check-input",3,"change","value","checked","id"],[1,"form-check-label","text-capitalize",3,"for"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","radio",1,"form-check-input",3,"ngModelChange","name","value","ngModel","id"],["type","radio",1,"form-check-input",3,"change","name","value","checked","id"],[1,"col-4"],["type","radio","name","expectationRange",1,"form-check-input",3,"change","value","checked","id"],["type","radio","name","streakSurface",1,"form-check-input",3,"ngModelChange","value","ngModel","id"],[1,"row","justify-content-center","mb-3"],[1,"col-auto"],["for","granularitySelect",1,"form-label","fw-bold","me-2"],["id","granularitySelect",1,"form-select","form-select-sm","d-inline","w-auto",3,"ngModelChange","ngModel"],["value","M"],["value","SM"],["value","GSM"]],template:function(e,i){if(e&1){let a=E();w(0,"div",4),o(1,"div",5)(2,"div",6)(3,"h5",7),d(4,"Match Details"),l(),o(5,"button",8),D("click",function(){return M(a),T(i.close())}),d(6,"\xD7"),l()(),o(7,"div",9)(8,"ul",10),_(9,ja,3,3,"li",11),l()(),o(10,"div",12),_(11,pr,8,7,"ng-container",13)(12,yr,12,8,"ng-template",null,0,J)(14,_r,2,4,"div",14)(15,Mr,65,19,"ng-template",null,1,J)(17,Dr,2,4,"div",14)(18,Ir,30,11,"ng-template",null,2,J)(20,Er,28,6,"div",14)(21,Fr,2,2,"ng-template",null,3,J),l()()}if(e&2){let a=j(22);c(9),g("ngForOf",i.tabs),c(2),g("ngIf",!i.loadingDetails&&i.summaryData)("ngIfElse",a),c(3),g("ngIf",i.activeTab==="Expectation Performance"&&i.summaryData),c(3),g("ngIf",i.activeTab==="Streak Info"&&i.summaryData),c(3),g("ngIf",i.activeTab==="H2H"&&i.summaryData)}},dependencies:[Q,ve,xe,Yt,Gt,zt,Xt,je,be,tn,nn,Ue,en,Je,Ke,qe,Zt],encapsulation:2})};var Or=["dateInput"];function Ar(n,t){n&1&&(o(0,"div",24)(1,"div",25),w(2,"div",26),o(3,"p",27),d(4,"Loading..."),l()()())}function Rr(n,t){n&1&&(o(0,"span",28),d(1,"\u25CF"),l())}function Lr(n,t){n&1&&(o(0,"div",29),d(1," No matches found for the selected filters."),w(2,"br"),d(3," Please adjust your filter options or clear the filters to continue browsing. "),l())}function Vr(n,t){if(n&1&&(o(0,"span"),d(1),l()),n&2){let e=v(2);c(),f(e.sortDirection==="asc"?"\u2191":"\u2193")}}function Wr(n,t){if(n&1&&(o(0,"span"),d(1),l()),n&2){let e=v(2);c(),f(e.sortDirection==="asc"?"\u2191":"\u2193")}}function Nr(n,t){if(n&1&&w(0,"span"),n&2){let e=v().$implicit;U("fi fi-",e.tournamentEventCountryISO2.toLowerCase(),"")}}function $r(n,t){if(n&1&&w(0,"span"),n&2){let e=v().$implicit;U("fi fi-",e.player1CountryISO2.toLowerCase(),"")}}function jr(n,t){if(n&1&&w(0,"span"),n&2){let e=v().$implicit;U("fi fi-",e.player2CountryISO2.toLowerCase(),"")}}function Hr(n,t){if(n&1&&(o(0,"td",38)(1,"span",39),d(2),l(),o(3,"span",40),d(4,"-"),l(),o(5,"span",41),d(6),l()()),n&2){let e=v().$implicit,i=v(2);c(2),f(i.formatOdds(e.player1Odds)),c(4),f(i.formatOdds(e.player2Odds))}}function Br(n,t){n&1&&(o(0,"td",38),d(1,"-"),l())}function Gr(n,t){if(n&1&&(o(0,"td",42)(1,"span",39),d(2),l(),o(3,"span",40),d(4,"-"),l(),o(5,"span",41),d(6),l()()),n&2){let e=v().$implicit,i=v(2);c(2),f(i.formatOdds(e.winProbabilityPlayer1NN)),c(4),f(i.formatOdds(e.winProbabilityPlayer2NN))}}function zr(n,t){n&1&&(o(0,"td",38),d(1,"-"),l())}function Yr(n,t){if(n&1){let e=E();o(0,"tr")(1,"td"),d(2),l(),o(3,"td"),d(4),l(),o(5,"td"),_(6,Nr,1,3,"span",34),o(7,"span",35),D("click",function(){let a=M(e).$implicit,r=v(2);return T(r.openTournamentModal(a.tournamentEventTPId))}),d(8),l()(),o(9,"td"),d(10),l(),o(11,"td"),d(12),l(),o(13,"td"),_(14,$r,1,3,"span",34),o(15,"span",35),D("click",function(){let a=M(e).$implicit,r=v(2);return T(r.openPlayerModal(a.player1TPId))}),d(16),l()(),o(17,"td"),_(18,jr,1,3,"span",34),o(19,"span",35),D("click",function(){let a=M(e).$implicit,r=v(2);return T(r.openPlayerModal(a.player2TPId))}),d(20),l()(),o(21,"td"),d(22),l(),o(23,"td"),d(24),l(),_(25,Hr,7,2,"td",36)(26,Br,2,0,"ng-template",null,1,J)(28,Gr,7,2,"td",37)(29,zr,2,0,"ng-template",null,2,J),o(31,"td")(32,"small",31),D("click",function(){let a=M(e).$implicit,r=v(2);return T(r.openMatchModal(a))}),d(33,"Details"),l()()()}if(n&2){let e=t.$implicit,i=j(27),a=j(30),r=v(2);c(2),f(r.getLocalizedDateTime(e.dateTime)),c(2),f(e.tournamentType),c(2),g("ngIf",e.tournamentEventCountryISO2),c(2),y(" ",r.decodeHtmlEntities(r.removeRomanSuffix(e.tournamentEventName||""))," "),c(2),f(e.tournamentLevel),c(2),f(e.surface),c(2),g("ngIf",e.player1CountryISO2),c(2),y(" ",r.decodeHtmlEntities(e.player1Name||"")," "),c(2),g("ngIf",e.player2CountryISO2),c(2),y(" ",r.decodeHtmlEntities(e.player2Name||"")," "),c(2),f(e.result),c(2),f(e.resultDetails||""),c(),g("ngIf",e.player1Odds!==null&&e.player2Odds!==null)("ngIfElse",i),c(3),g("ngIf",e.winProbabilityPlayer1NN)("ngIfElse",a)}}function Xr(n,t){if(n&1){let e=E();o(0,"table",30)(1,"thead")(2,"tr")(3,"th",31),D("click",function(){M(e);let a=v();return T(a.toggleSort("date"))}),d(4,"Date "),_(5,Vr,2,1,"span",32),l(),o(6,"th"),d(7,"Type"),l(),o(8,"th",31),D("click",function(){M(e);let a=v();return T(a.toggleSort("tournament"))}),d(9,"Tournament "),_(10,Wr,2,1,"span",32),l(),o(11,"th"),d(12,"Level"),l(),o(13,"th"),d(14,"Surface"),l(),o(15,"th"),d(16,"Player 1"),l(),o(17,"th"),d(18,"Player 2"),l(),o(19,"th"),d(20,"Result"),l(),o(21,"th"),d(22,"Result Details"),l(),o(23,"th"),d(24,"Odds"),l(),o(25,"th"),d(26,"\xA0\xA0Probability\xA0\xA0 "),l(),w(27,"th"),l()(),o(28,"tbody"),_(29,Yr,34,16,"tr",33),l()()}if(n&2){let e=v();c(5),g("ngIf",e.sortField==="date"),c(5),g("ngIf",e.sortField==="tournament"),c(19),g("ngForOf",e.matches)}}function Ur(n,t){if(n&1){let e=E();o(0,"app-match-modal",43),D("closed",function(){M(e);let a=v();return T(a.closeMatchModal())}),l()}if(n&2){let e=v();g("match",e.selectedMatch)}}function Kr(n,t){if(n&1){let e=E();o(0,"app-player-modal",44),D("closed",function(){M(e);let a=v();return T(a.closePlayerModal())}),l()}if(n&2){let e=v();g("playerTPId",e.selectedPlayer)}}function qr(n,t){if(n&1){let e=E();o(0,"app-tournament-modal",45),D("closed",function(){M(e);let a=v();return T(a.closeTournamentModal())}),l()}if(n&2){let e=v();g("tournamentEventTPId",e.selectedTournament)}}function Jr(n,t){if(n&1){let e=E();o(0,"app-match-filter-modal",46),D("closed",function(){M(e);let a=v();return T(a.closeFilterModal())})("filterApplied",function(a){M(e);let r=v();return T(r.onFilterApplied(a))})("resetFilter",function(){M(e);let a=v();return T(a.onFilterReset())}),l()}if(n&2){let e=v();g("activeDateFilter",e.activeDateFilter)("activeFromDate",e.activeFromDate)("activeToDate",e.activeToDate)("minDate",e.minDate)("maxDate",e.maxDate)("activeSurfaceIds",e.activeSurfaceIds)("activeTournamentTypeIds",e.activeTournamentTypeIds)("activeTournamentLevelIds",e.activeTournamentLevelIds)}}function Qr(n,t){if(n&1){let e=E();o(0,"div",47),D("click",function(){M(e);let a=v();return T(a.closeDateWarningModal())}),o(1,"div",48),D("click",function(a){return M(e),T(a.stopPropagation())}),o(2,"h5",49),d(3,"Date Adjusted"),l()(),o(4,"div",50),D("click",function(a){return M(e),T(a.stopPropagation())}),o(5,"p"),d(6," No matches are available outside the allowed range. "),w(7,"br"),d(8," Allowed date range: "),o(9,"strong"),d(10),R(11,"date"),l(),d(12," to "),o(13,"strong"),d(14),R(15,"date"),l(),d(16,". "),l(),w(17,"hr"),o(18,"div",51)(19,"button",52),D("click",function(){M(e);let a=v();return T(a.closeDateWarningModal())}),d(20,"OK"),l()()()()}if(n&2){let e=v();c(10),f(L(11,2,e.minDate,"yyyy-MM-dd")),c(4),f(L(15,5,e.maxDate,"yyyy-MM-dd"))}}function Zr(n,t){if(n&1){let e=E();o(0,"div",53)(1,"div",54)(2,"h5",49),d(3,"Invalid Date"),l()(),o(4,"div",55)(5,"p"),d(6," The selected date is outside your active filter range."),w(7,"br"),d(8," Please adjust your filter settings or clear the filter. "),l(),w(9,"hr"),o(10,"div",51)(11,"button",52),D("click",function(){M(e);let a=v();return T(a.showOutOfRangeModal=!1)}),d(12,"OK"),l()()()()}}var ri=class n{constructor(t,e,i){this.matchService=t;this.translate=e;this.appComponent=i}Math=Math;matches=[];filteredMatches=[];isFiltered=!1;filteredPage=1;currentDate=new Date("2022-01-01");isNextDisabled=!1;isPrevDisabled=!1;loading=!1;selectedDate=null;showDatepicker=!1;showFilterModal=!1;selectedPlayer=null;selectedTournament=null;sortField="tournament";sortDirection="asc";filterApplied=!1;activeDateFilter="all";activeFromDate=null;activeToDate=null;activeSurfaceIds=[1,2,3,4];activeTournamentTypeIds=[2,4];activeTournamentLevelIds=[1,2,3,4];filteredAvailableDates=[];showDateWarning=!1;currentDateString=this.formatDate(this.currentDate);noMatchesForFilter=!1;showOutOfRangeModal=!1;minDate;maxDate;inputDebounceTimeout=null;availableDates=[];selectedMatch=null;dateInputRef;onClickOutside(t){let e=t.target,i=e.closest(".datepicker-wrapper"),a=e.closest(".datepicker-toggle");!i&&!a&&(this.showDatepicker=!1)}ngOnInit(){this.matchService.getDateRange().subscribe({next:({minDate:t,maxDate:e})=>{this.minDate=new Date(t),this.maxDate=new Date(e),this.currentDate=this.maxDate,this.currentDateString=this.formatDateForInput(this.currentDate),this.matchService.getAvailableDates().subscribe({next:i=>{this.availableDates=i,this.loadMatchesForDate(this.currentDate)},error:i=>{console.error("\u274C Failed to load availableDates:",i)}})},error:t=>{console.error("\u274C Failed to load match date range:",t)}}),document.addEventListener("keydown",this.handleEscapeKey.bind(this))}ngOnDestroy(){document.removeEventListener("keydown",this.handleEscapeKey.bind(this))}formatDate(t){return t.toISOString().split("T")[0].replace(/-/g,"")}scrollToTop(){let t=document.querySelector(".table-wrapper");t&&(t.scrollTop=0)}handleEscapeKey(t){t.key==="Escape"&&this.closeDateWarningModal()}loadMatchesForDate(t){this.loading=!0;let e=this.correctDateIfOutOfBounds(t);this.currentDate=e,this.currentDateString=this.formatDateForInput(e),this.noMatchesForFilter=!1,e.getTime()!==t.getTime()&&this.showDateOutOfRangeModal();let i=this.formatDate(e);this.matchService.getMatchesByDate(i).subscribe({next:a=>{let r=a.matches||[];this.isFiltered&&(this.activeSurfaceIds?.length&&this.activeSurfaceIds.length<4&&(r=r.filter(s=>s.surfaceId!==void 0&&this.activeSurfaceIds.includes(s.surfaceId))),this.activeTournamentTypeIds?.length&&this.activeTournamentTypeIds.length<2&&(r=r.filter(s=>s.tournamentTypeId!==void 0&&this.activeTournamentTypeIds.includes(s.tournamentTypeId))),this.activeTournamentLevelIds?.length&&this.activeTournamentLevelIds.length<4&&(r=r.filter(s=>s.tournamentLevelId!==void 0&&this.activeTournamentLevelIds.includes(s.tournamentLevelId)))),this.matches=r,this.sortMatches(),this.checkAdjacentDaysAvailability(e),this.loading=!1},error:a=>{console.error("\u274C Error loading matches:",a),this.matches=[],this.loading=!1,this.isPrevDisabled=!0,this.isNextDisabled=!0}})}sortMatches(){this.matches.sort((t,e)=>{let i="",a="";this.sortField==="tournament"?(i=this.removeRomanSuffix(t.tournamentEventName||"").toLowerCase(),a=this.removeRomanSuffix(e.tournamentEventName||"").toLowerCase()):this.sortField==="date"&&(i=new Date(t.dateTime).getTime(),a=new Date(e.dateTime).getTime());let r=i<a?-1:i>a?1:0;return this.sortDirection==="asc"?r:-r})}toggleSort(t){this.sortField===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=t,this.sortDirection="asc"),this.sortMatches()}onNativeDateChange(t){let e=t.target,i=new Date(e.value);if(isNaN(i.getTime()))return;let a=i.toISOString().split("T")[0];if(this.isFiltered&&this.filteredAvailableDates.length>0&&!this.filteredAvailableDates.includes(a)){this.showOutOfFilterRangeModal();let s=this.currentDate?this.formatDateForInput(this.currentDate):"";console.log("Resetting input to last valid date:",this.currentDate,s),this.currentDateString=s,this.dateInputRef?.nativeElement&&(this.dateInputRef.nativeElement.value=this.currentDateString);return}this.loadMatchesForDate(i)}onDateInputChanged(t){let e=t.target;this.inputDebounceTimeout&&clearTimeout(this.inputDebounceTimeout),this.inputDebounceTimeout=setTimeout(()=>{let i=new Date(e.value);if(isNaN(i.getTime()))return;let a=i.toISOString().split("T")[0];if(this.isFiltered&&this.filteredAvailableDates.length>0&&!this.filteredAvailableDates.includes(a)){this.showOutOfFilterRangeModal();let s=this.formatDateForInput(this.currentDate);this.currentDateString=s,this.dateInputRef?.nativeElement&&(this.dateInputRef.nativeElement.value=s);return}if(!this.isFiltered){let r=this.correctDateIfOutOfBounds(i);if(r.getTime()!==i.getTime()){this.showDateOutOfRangeModal();let s=this.formatDateForInput(r);this.currentDate=r,this.currentDateString=s,this.dateInputRef?.nativeElement&&(this.dateInputRef.nativeElement.value=s),this.loadMatchesForDate(r),this.checkAdjacentDaysAvailability(r);return}}this.loadMatchesForDate(i)},500)}previousDay(){if(this.isFiltered&&this.filteredAvailableDates.length>0){let t=this.formatDateForInput(this.currentDate),e=this.filteredAvailableDates.findIndex(i=>i.trim()===t);if(console.log("\u{1F4CD} Filtered Dates:",this.filteredAvailableDates),console.log("\u{1F4CD} Current Date string:",t),console.log("\u{1F4CD} Index found:",e),e>0){let i=new Date(this.filteredAvailableDates[e-1].trim());this.currentDate=i,this.filteredPage=1,this.loadMatchesForDate(i)}}else{let t=new Date(this.currentDate);t.setDate(t.getDate()-1),this.loadMatchesForDate(t)}this.scrollToTop()}nextDay(){if(this.isFiltered&&this.filteredAvailableDates.length>0){let t=this.formatDateForInput(this.currentDate),e=this.filteredAvailableDates.findIndex(i=>i.trim()===t);if(console.log("\u{1F4CD} Filtered Dates:",this.filteredAvailableDates),console.log("\u{1F4CD} Current Date string:",t),console.log("\u{1F4CD} Index found:",e),e>=0&&e<this.filteredAvailableDates.length-1){let i=new Date(this.filteredAvailableDates[e+1].trim());this.currentDate=i,this.filteredPage=1,this.loadMatchesForDate(i)}}else{let t=new Date(this.currentDate);t.setDate(t.getDate()+1),this.loadMatchesForDate(t)}this.scrollToTop()}getLocalizedDateTime(t){let e=typeof t=="string"?new Date(t):t;if(isNaN(e.getTime()))return"";let i=p=>p.toString().padStart(2,"0"),a=i(e.getDate()),r=i(e.getMonth()+1),s=e.getFullYear(),m=i(e.getHours()),u=i(e.getMinutes());return`${a}.${r}.${s} ${m}:${u}`}formatOdds(t){return t==null||isNaN(t)?"":t.toFixed(2)}formatPercent(t){return t==null||isNaN(t)?"":(t*100).toFixed(0)+"%"}openMatchModal(t){this.selectedMatch=t}closeMatchModal(){this.selectedMatch=null}openFilterModal(){this.showFilterModal=!0}closeFilterModal(){this.showFilterModal=!1}openPlayerModal(t){this.selectedPlayer=t}closePlayerModal(){this.selectedPlayer=null}openTournamentModal(t){this.selectedTournament=t}closeTournamentModal(){this.selectedTournament=null}formatResult(t){if(!t||t.length!==2)return"";let e=t[0],i=t[1];return`${e} : ${i}`}removeRomanSuffix(t){return t.replace(/\s*(\([IVXLCDM]{1,4}\)|[IVXLCDM]{1,4})\s*$/,"").trim()}decodeHtmlEntities(t){let e=document.createElement("textarea");return e.innerHTML=t,e.value}onFilterApplied(t){console.log("\u{1F9EA} onFilterApplied (incoming):",t),t.option==="all"&&(!t.startDate||!t.endDate)&&(t.startDate=this.minDate.toISOString().split("T")[0],t.endDate=this.maxDate.toISOString().split("T")[0]);let e=new Date(t.startDate),i=new Date(t.endDate),a=e.toISOString().split("T")[0],r=i.toISOString().split("T")[0];this.activeDateFilter=t.option,this.activeFromDate=a,this.activeToDate=r,this.activeSurfaceIds=t.surfaceIds?.length?t.surfaceIds:[1,2,3,4],this.activeTournamentTypeIds=t.tournamentTypeIds?.length?t.tournamentTypeIds:[2,4],this.activeTournamentLevelIds=t.tournamentLevelIds?.length?t.tournamentLevelIds:[1,2,3,4];let s=this.activeSurfaceIds.length===4&&[1,2,3,4].every(h=>this.activeSurfaceIds.includes(h)),m=this.activeTournamentTypeIds.length===2&&[2,4].every(h=>this.activeTournamentTypeIds.includes(h)),u=this.activeTournamentLevelIds.length===4&&[1,2,3,4].every(h=>this.activeTournamentLevelIds.includes(h)),p=t.option==="all";if(this.isFiltered=!(p&&s&&m&&u),this.filterApplied=this.isFiltered,!this.isFiltered){this.filteredAvailableDates=[],this.filteredPage=1,this.noMatchesForFilter=!1,this.currentDateString=this.formatDateForInput(this.currentDate),this.showFilterModal=!1,this.loadMatchesForDate(this.currentDate);return}this.matchService.getAvailableDates().subscribe({next:h=>{let x=h.filter(C=>C>=a&&C<=r);if(x.length===0){console.warn("\u26A0\uFE0F No matches found for selected range:",a,"to",r),this.matches=[],this.filteredAvailableDates=[],this.noMatchesForFilter=!0,this.loading=!1,this.showFilterModal=!1;return}this.filteredAvailableDates=x;let S=x[x.length-1];this.currentDate=new Date(S),this.filteredPage=1,this.noMatchesForFilter=!1,this.showFilterModal=!1,this.loading=!0,this.loadMatchesForDate(this.currentDate)},error:h=>{console.error("\u274C Error fetching available dates:",h),this.matches=[],this.filteredAvailableDates=[],this.noMatchesForFilter=!0,this.loading=!1,this.showFilterModal=!1}})}generateDateRange(t,e){let i=[],a=new Date(t),r=new Date(e);for(;a<=r;){let s=a.toISOString().split("T")[0];this.availableDates.includes(s)&&i.push(s),a.setDate(a.getDate()+1)}return i}clearFilter(){this.isFiltered=!1,this.filteredPage=1,this.loadMatchesForDate(this.currentDate)}onFilterReset(){this.filterApplied=!1,this.activeDateFilter="all",this.activeFromDate=null,this.activeToDate=null,this.clearFilter()}isFilterDefault(){let t=this.activeSurfaceIds.length===4&&[1,2,3,4].every(r=>this.activeSurfaceIds.includes(r)),e=this.activeTournamentTypeIds.length===2&&[2,4].every(r=>this.activeTournamentTypeIds.includes(r)),i=this.activeTournamentLevelIds.length===4&&[1,2,3,4].every(r=>this.activeTournamentLevelIds.includes(r)),a=this.activeDateFilter==="all";return t&&e&&i&&a}correctDateIfOutOfBounds(t){return t<this.minDate?this.minDate:t>this.maxDate?this.maxDate:t}showDateOutOfRangeModal(){this.showDateWarning=!0,setTimeout(()=>this.closeDateWarningModal(),5e3)}closeDateWarningModal(){this.showDateWarning=!1}checkAdjacentDaysAvailability(t){let e=this.formatDateForInput(t);if(this.isFiltered&&this.filteredAvailableDates.length>0){let r=this.filteredAvailableDates.findIndex(s=>s===e);if(console.log("\u{1F4CD} Current Date string:",e),console.log("\u{1F4CD} Index found:",r),this.isPrevDisabled=r<=0,this.isNextDisabled=r===-1||r>=this.filteredAvailableDates.length-1,r===-1){let s=new Date(e).getTime(),m=this.filteredAvailableDates.find(p=>new Date(p).getTime()<s),u=this.filteredAvailableDates.find(p=>new Date(p).getTime()>s);this.isPrevDisabled=!m,this.isNextDisabled=!u}return}let i=new Date(t);i.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()+1),this.matchService.getMatchesByDate(this.formatDate(i)).subscribe({next:r=>{this.isPrevDisabled=!r?.matches?.length},error:()=>{this.isPrevDisabled=!0}}),this.matchService.getMatchesByDate(this.formatDate(a)).subscribe({next:r=>{this.isNextDisabled=!r?.matches?.length},error:()=>{this.isNextDisabled=!0}})}showOutOfFilterRangeModal(){this.showOutOfRangeModal=!0,setTimeout(()=>this.showOutOfRangeModal=!1,5e3)}formatDateForInput(t){return!t||isNaN(t.getTime())?(console.error("\u274C Invalid date passed to formatDateForInput:",t),"Invalid-Date"):t.toISOString().split("T")[0]}static \u0275fac=function(e){return new(e||n)(le(Ee),le(rn),le(dn))};static \u0275cmp=Y({type:n,selectors:[["app-matches"]],viewQuery:function(e,i){if(e&1&&Nt(Or,5),e&2){let a;$t(a=jt())&&(i.dateInputRef=a.first)}},hostBindings:function(e,i){e&1&&D("click",function(r){return i.onClickOutside(r)},!1,Vt)},inputs:{minDate:"minDate",maxDate:"maxDate"},decls:25,vars:17,consts:[["dateInput",""],["emptyOdds",""],["emptyProb",""],[1,"matches-page-wrapper"],["class","loading-overlay",4,"ngIf"],[1,"date-nav-sticky","d-flex","align-items-center","justify-content-between","mt-3","px-2"],[1,"pagination-center-wrapper","mx-auto","d-flex","align-items-center","gap-3"],[1,"link-button",3,"click","disabled"],["src","assets/icons/left.svg","alt","Previous",1,"arrow-icon"],["type","date",1,"custom-date-input",3,"change","value","disabled"],["src","assets/icons/right.svg","alt","Next",1,"arrow-icon"],[1,"filter-button-wrapper"],[1,"link-button","d-flex","align-items-center","gap-2",3,"click"],["src","assets/icons/filter.svg","alt","Filter",1,"arrow-icon"],["class","badge bg-success ms-1",4,"ngIf"],[1,"table-wrapper"],["class","text-center mt-3 p-3 rounded border","style","background-color: #f8f9fa; color: #6c757d;",4,"ngIf"],["class","match-table",4,"ngIf"],[3,"match","closed",4,"ngIf"],[3,"playerTPId","closed",4,"ngIf"],[3,"tournamentEventTPId","closed",4,"ngIf"],[3,"activeDateFilter","activeFromDate","activeToDate","minDate","maxDate","activeSurfaceIds","activeTournamentTypeIds","activeTournamentLevelIds","closed","filterApplied","resetFilter",4,"ngIf"],["class","modal-custom",3,"click",4,"ngIf"],["class","modal-custom",4,"ngIf"],[1,"loading-overlay"],[1,"spinner-wrapper"],["role","status",1,"spinner-border","text-light"],[1,"text-white","mt-3"],[1,"badge","bg-success","ms-1"],[1,"text-center","mt-3","p-3","rounded","border",2,"background-color","#f8f9fa","color","#6c757d"],[1,"match-table"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],[1,"clickable-text",3,"click"],["class","odds-combined-cell",4,"ngIf","ngIfElse"],["class","odds-combined-cell percentage-cell",4,"ngIf","ngIfElse"],[1,"odds-combined-cell"],[1,"odds-left"],[1,"odds-separator"],[1,"odds-right"],[1,"odds-combined-cell","percentage-cell"],[3,"closed","match"],[3,"closed","playerTPId"],[3,"closed","tournamentEventTPId"],[3,"closed","filterApplied","resetFilter","activeDateFilter","activeFromDate","activeToDate","minDate","maxDate","activeSurfaceIds","activeTournamentTypeIds","activeTournamentLevelIds"],[1,"modal-custom",3,"click"],[1,"modal-header","justify-content-center",3,"click"],[1,"modal-title","text-center","w-100"],[1,"modal-body",3,"click"],[1,"text-end"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"modal-custom"],[1,"modal-header","justify-content-center"],[1,"modal-body"]],template:function(e,i){if(e&1){let a=E();o(0,"div",3),_(1,Ar,5,0,"div",4),o(2,"div",5)(3,"div",6)(4,"button",7),D("click",function(){return M(a),T(i.previousDay())}),w(5,"img",8),l(),o(6,"input",9,0),R(8,"date"),D("change",function(s){return M(a),T(i.onDateInputChanged(s))}),l(),o(9,"button",7),D("click",function(){return M(a),T(i.nextDay())}),w(10,"img",10),l()(),o(11,"div",11)(12,"button",12),D("click",function(){return M(a),T(i.openFilterModal())}),w(13,"img",13),d(14," Filter "),_(15,Rr,2,0,"span",14),l()()(),o(16,"div",15),_(17,Lr,4,0,"div",16)(18,Xr,30,3,"table",17)(19,Ur,1,1,"app-match-modal",18)(20,Kr,1,1,"app-player-modal",19)(21,qr,1,1,"app-tournament-modal",20)(22,Jr,1,8,"app-match-filter-modal",21)(23,Qr,21,8,"div",22)(24,Zr,13,0,"div",23),l()()}e&2&&(c(),g("ngIf",i.loading),c(3),g("disabled",i.isPrevDisabled),c(2),g("value",L(8,14,i.formatDateForInput(i.currentDate),"yyyy-MM-dd"))("disabled",i.matches.length===0||i.isFiltered&&i.filteredAvailableDates.length===0),c(3),g("disabled",i.isNextDisabled),c(6),g("ngIf",i.isFiltered),c(2),g("ngIf",i.matches.length===0&&i.isFiltered),c(),g("ngIf",i.matches.length>0),c(),g("ngIf",i.selectedMatch),c(),g("ngIf",i.selectedPlayer),c(),g("ngIf",i.selectedTournament),c(),g("ngIf",i.showFilterModal),c(),g("ngIf",i.showDateWarning),c(),g("ngIf",i.showOutOfRangeModal))},dependencies:[Q,ve,xe,je,be,an,Qe,cn,et,st],encapsulation:2})};export{ri as MatchesComponent};
