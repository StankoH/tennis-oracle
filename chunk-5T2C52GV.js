import{a as h}from"./chunk-HP2GQHZV.js";import{a as p}from"./chunk-DJ4ZLQE5.js";import{c,e as m}from"./chunk-V4HT3JDP.js";import{a as u}from"./chunk-M6G75PQQ.js";import{Ab as s,Oa as i,Ua as o,kb as a,lb as n}from"./chunk-GPF5BPB6.js";var v=class r{constructor(e,t,l,f){this.route=e;this.router=t;this.authService=l;this.http=f}ngOnInit(){let e=this.route.snapshot.queryParamMap.get("token");e?(localStorage.setItem("token",e),this.http.get(`${p.apiUrl}/auth/me`,{headers:{Authorization:`Bearer ${e}`}}).subscribe({next:t=>{this.authService.setUser(t.user),this.authService.setAuthState(!0),this.router.navigate(["/"])},error:t=>{console.error("Gre\u0161ka kod /me:",t),this.authService.logout(),this.router.navigate(["/login"])}})):this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||r)(i(c),i(m),i(h),i(u))};static \u0275cmp=o({type:r,selectors:[["app-oauth-success"]],decls:2,vars:0,template:function(t,l){t&1&&(a(0,"p"),s(1,"Prijava uspje\u0161na! Preusmjeravam..."),n())},encapsulation:2})};export{v as OauthSuccessComponent};
